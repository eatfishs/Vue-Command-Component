(function(a,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("element-plus"),require("vant")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus","vant"],e):(a=typeof globalThis<"u"?globalThis:a||self,e(a.Vue3CommandDialog={},a.Vue,a.ElementPlus,a.Vant))})(this,function(a,e,v,N){"use strict";var A=Object.defineProperty;var L=(a,e,v)=>e in a?A(a,e,{enumerable:!0,configurable:!0,writable:!0,value:v}):a[e]=v;var E=(a,e,v)=>L(a,typeof e!="symbol"?e+"":e,v);class M{constructor(){E(this,"map",new WeakMap)}getEventsMapByConsumer(s){let t=this.map.get(s);return t||(t=new Map,this.map.set(s,t)),t}getEventsByConsumer(s,t){const n=this.getEventsMapByConsumer(s);let r=n.get(t);return r||(r=new Set,n.set(t,r)),r}on(s,t,n,r={}){const l=this.getEventsByConsumer(s,t);let i=n;r.once&&(i=(...d)=>{n(...d),this.off(s,t,i)}),l.add(i),r.callAfterDelay!==void 0&&setTimeout(()=>{i()},r.callAfterDelay||0)}once(s,t,n){this.on(s,t,n,{once:!0})}emit(s,t,...n){this.getEventsByConsumer(s,t).forEach(l=>l(...n))}off(s,t,n){this.getEventsByConsumer(s,t).delete(n)}}const S=(o="")=>o.slice(2).toLowerCase(),w=(o="")=>`on${o.charAt(0).toUpperCase()}${o.slice(1)}`,I=()=>{let o=()=>{},s=()=>{};return{promise:new Promise((n,r)=>{o=n,s=r}),resolve:o,reject:s}};var C=(o=>(o.confirm="confirm",o.cancel="cancel",o.destory="destory",o))(C||{});const b=Symbol("CommandDialogConsumerInjectKey"),V=Symbol("CommandDialogStackInjectKey"),P=new M,j=o=>({...o.parent?j(o.parent):{},...o.provides});function T(o,s,t){const n=(typeof t.appendTo=="string"?document.querySelector(t.appendTo):t.appendTo)||document.body,r=document.createElement("div");r.className="command-commponent-container",n.appendChild(r);const l=()=>{t.visible.value=!1},i=()=>{t.visible.value=!0},d=()=>{e.nextTick(()=>{e.render(null,r),r.remove()})},m=(c=!1)=>{c?(p.on(C.destory,d,{once:!0,callAfterDelay:3e3}),l()):p.stack.splice(p.stackIndex).forEach(u=>u.destroy(!0))},{promise:y,resolve:h,reject:D}=I(),p={promise:y,resolve:h,reject:D,destroyWithResolve:c=>{h(c),m()},destroyWithReject:c=>{D(c),m()},hide:l,show:i,destroy:m,container:r,visible:t.visible,on:(c,u,q={})=>P.on(p,c,u,q),once:(c,u)=>P.once(p,c,u),emit:(c,...u)=>P.emit(p,c,...u),off:(c,u)=>P.off(p,c,u),stack:[],stackIndex:-1,componentRef:void 0},O=e.defineComponent({setup(){for(const u in t.provideProps)e.provide(u,t.provideProps[u]);e.provide(b,p);const c=e.inject(V,[]);return p.stackIndex=c.length,c.push(p),e.provide(V,c),p.stack=c,()=>s}}),f=e.createVNode(O,null,null);return f.appContext=(o==null?void 0:o.appContext)||f.appContext,f.appContext.provides={...f.appContext.provides,...j(o)},e.render(f,r),p}const R=(o=!0)=>{const s=()=>o&&console.warn(`别调用了欧尼酱~,这会儿没啥实际用途;没有根据CommandDialogInjectKey接收到注入数据.原因可能有两个:
    1.你可能对getCommandDialogConsumer进行了异步调用或条件调用,请在setup中直接调用.
    2.你没有在命令弹窗内展示该组件,这个时候你一般可以忽略该警告消息.`);return e.inject(b,()=>new Proxy({},{get:()=>s,apply:s}),!0)},x=(o=!0)=>{const s=e.getCurrentInstance(),{locale:{t}}=v.useGlobalComponentSettings("message-box");return(r,l={})=>{const i=e.ref(o),d=T(s,e.h(e.defineComponent({setup(){const m=e.ref(),y=g=>{g(),d.destroy()},h=()=>{d.emit(C.destory)},D=()=>{Promise.resolve().then(()=>{d.componentRef=m})};return()=>e.createVNode(v.ElDialog,e.mergeProps({ref:m,modelValue:i.value,beforeClose:y,onClosed:h,onVnodeMounted:D},{title:l.title,width:l.width,...l.attrs}),{default:()=>r,footer:()=>e.createVNode("div",null,[l[w(C.cancel)]&&e.createVNode(e.resolveComponent("el-button"),{onClick:()=>d.emit(C.cancel)},{default:()=>[l.cancelBtnText||t("el.messagebox.cancel")]}),l[w(C.confirm)]&&e.createVNode(e.resolveComponent("el-button"),{type:"primary",onClick:()=>d.emit(C.confirm)},{default:()=>[l.confirmBtnText||t("el.messagebox.confirm")]})]),...l.slots})}})),{provideProps:l.provideProps||{},appendTo:l.appendTo,visible:i});return Object.entries(l).filter(([m,y])=>m.startsWith("on")&&typeof y=="function").forEach(([m,y])=>{const h=S(m);d.on(h,y)}),d}},U={overlay:!0,round:!0,lockScroll:!0,closeable:!0,closeOnClickOverlay:!1,style:{backgroundColor:"#fff",color:"#000"}},k=(o=!0)=>{const s=e.getCurrentInstance();return(n,r={})=>{const l=e.ref(o),i=T(s,e.h(e.defineComponent({setup(){const d=e.ref(),m=()=>{i.destroy()},y=()=>{i.emit(C.destory)},h=()=>{Promise.resolve().then(()=>{i.componentRef=d})};return()=>e.createVNode(N.Popup,e.mergeProps({ref:d,show:l.value,onClickCloseIcon:m,onClosed:y,onVnodeMounted:h},{...U,...r.attrs}),{default:()=>n,...r.slots})}})),{provideProps:r.provideProps||{},appendTo:r.appendTo,visible:l});return i}},W=(o=!0)=>{const s=k(o);return(t,n={})=>(n.attrs||(n.attrs={}),n.attrs.position="bottom",n.attrs.style.width="100vw",s(t,n))},B=(o=!0)=>{const s=k(o);return(t,n={})=>{const r=e.createVNode("div",{class:"w-full h-full"},[n.title&&e.createVNode("div",{class:"vant-popup-title"},[e.createVNode("div",{class:"vant-popup-title-text",innerHTML:n.title},null)]),t]);return s(r,n)}},K=(o=!0)=>{const s=B(o);return(t,n={})=>(n.attrs||(n.attrs={}),n.attrs.position="bottom",n.attrs.style.width="100vw",s(t,n))};a.CommandDialogConsumerInjectKey=b,a.CommandDialogProvider=T,a.CommandDialogStackInjectKey=V,a.EVENT_NAME=C,a.createElementPlusDialog=x,a.createVantUiPopup=k,a.createVantUiPopupOnBottom=W,a.createVantUiTitlePopup=B,a.createVantUiTitlePopupOnBottom=K,a.getCommandDialogConsumer=R,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
