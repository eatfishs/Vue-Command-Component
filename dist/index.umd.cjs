(function(l,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue"),require("element-plus"),require("vant")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus","vant"],s):(l=typeof globalThis<"u"?globalThis:l||self,s(l.Vue3CommandDialog={},l.Vue,l.ElementPlus,l.Vant))})(this,function(l,s,_,Ne){"use strict";var vr=Object.defineProperty;var br=(l,s,_)=>s in l?vr(l,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):l[s]=_;var Me=(l,s,_)=>br(l,typeof s!="symbol"?s+"":s,_);class xe{constructor(){Me(this,"map",new WeakMap)}getEventsMapByConsumer(t){let n=this.map.get(t);return n||(n=new Map,this.map.set(t,n)),n}getEventsByConsumer(t,n){const r=this.getEventsMapByConsumer(t);let o=r.get(n);return o||(o=new Set,r.set(n,o)),o}on(t,n,r,o={}){const a=this.getEventsByConsumer(t,n);let c=r;o.once&&(c=(...i)=>{r(...i),this.off(t,n,c)}),a.add(c),o.callAfterDelay!==void 0&&setTimeout(()=>{c()},o.callAfterDelay||0)}once(t,n,r){this.on(t,n,r,{once:!0})}emit(t,n,...r){this.getEventsByConsumer(t,n).forEach(a=>a(...r))}off(t,n,r){this.getEventsByConsumer(t,n).delete(r)}}const Ve=(e="")=>e.slice(2).toLowerCase(),ee=(e="")=>`on${e.charAt(0).toUpperCase()}${e.slice(1)}`,Be=()=>{let e=()=>{},t=()=>{};return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}};var v=(e=>(e.confirm="confirm",e.cancel="cancel",e.destory="destory",e))(v||{});const z=Symbol("CommandDialogConsumerInjectKey"),F=Symbol("CommandDialogStackInjectKey"),I=new xe,te=e=>({...e.parent?te(e.parent):{},...e.provides});function H(e,t,n){const r=(typeof n.appendTo=="string"?document.querySelector(n.appendTo):n.appendTo)||document.body,o=document.createElement("div");o.className="command-commponent-container",r.appendChild(o);const a=()=>{n.visible.value=!1},c=()=>{n.visible.value=!0},i=()=>{s.nextTick(()=>{s.render(null,o),o.remove()})},u=(h=!1)=>{h?(m.on(v.destory,i,{once:!0,callAfterDelay:3e3}),a()):m.stack.splice(m.stackIndex).forEach(y=>y.destroy(!0))},{promise:p,resolve:d,reject:g}=Be(),m={promise:p,resolve:d,reject:g,destroyWithResolve:h=>{d(h),u()},destroyWithReject:h=>{g(h),u()},hide:a,show:c,destroy:u,container:o,visible:n.visible,on:(h,y,gr={})=>I.on(m,h,y,gr),once:(h,y)=>I.once(m,h,y),emit:(h,...y)=>I.emit(m,h,...y),off:(h,y)=>I.off(m,h,y),stack:[],stackIndex:-1,componentRef:void 0},yr=s.defineComponent({setup(){for(const y in n.provideProps)s.provide(y,n.provideProps[y]);s.provide(z,m);const h=s.inject(F,[]);return m.stackIndex=h.length,h.push(m),s.provide(F,h),m.stack=h,()=>t}}),E=s.createVNode(yr,null,null);return E.appContext=(e==null?void 0:e.appContext)||E.appContext,E.appContext.provides={...E.appContext.provides,...te(e)},s.render(E,o),m}const Re=(e=!0)=>{const t=()=>e&&console.warn(`别调用了欧尼酱~,这会儿没啥实际用途;没有根据CommandDialogInjectKey接收到注入数据.原因可能有两个:
    1.你可能对getCommandDialogConsumer进行了异步调用或条件调用,请在setup中直接调用.
    2.你没有在命令弹窗内展示该组件,这个时候你一般可以忽略该警告消息.`);return s.inject(z,()=>new Proxy({},{get:()=>t,apply:t}),!0)},Ue=(e=!0)=>{const t=s.getCurrentInstance(),{locale:{t:n}}=_.useGlobalComponentSettings("message-box");return(o,a={})=>{const c=s.ref(e),i=H(t,s.h(s.defineComponent({setup(){const u=s.ref(),p=w=>{w(),i.destroy()},d=()=>{i.emit(v.destory)},g=()=>{Promise.resolve().then(()=>{i.componentRef=u})};return()=>s.createVNode(_.ElDialog,s.mergeProps({ref:u,modelValue:c.value,beforeClose:p,onClosed:d,onVnodeMounted:g},{title:a.title,width:a.width,...a.attrs}),{default:()=>o,footer:()=>s.createVNode("div",null,[a[ee(v.cancel)]&&s.createVNode(s.resolveComponent("el-button"),{onClick:()=>i.emit(v.cancel)},{default:()=>[a.cancelBtnText||n("el.messagebox.cancel")]}),a[ee(v.confirm)]&&s.createVNode(s.resolveComponent("el-button"),{type:"primary",onClick:()=>i.emit(v.confirm)},{default:()=>[a.confirmBtnText||n("el.messagebox.confirm")]})]),...a.slots})}})),{provideProps:a.provideProps||{},appendTo:a.appendTo,visible:c});return Object.entries(a).filter(([u,p])=>u.startsWith("on")&&typeof p=="function").forEach(([u,p])=>{const d=Ve(u);i.on(d,p)}),i}};var ne=typeof global=="object"&&global&&global.Object===Object&&global,ze=typeof self=="object"&&self&&self.Object===Object&&self,P=ne||ze||Function("return this")(),M=P.Symbol,re=Object.prototype,Fe=re.hasOwnProperty,He=re.toString,S=M?M.toStringTag:void 0;function Ke(e){var t=Fe.call(e,S),n=e[S];try{e[S]=void 0;var r=!0}catch{}var o=He.call(e);return r&&(t?e[S]=n:delete e[S]),o}var Ge=Object.prototype,Le=Ge.toString;function We(e){return Le.call(e)}var qe="[object Null]",Xe="[object Undefined]",oe=M?M.toStringTag:void 0;function N(e){return e==null?e===void 0?Xe:qe:oe&&oe in Object(e)?Ke(e):We(e)}function A(e){return e!=null&&typeof e=="object"}var K=Array.isArray;function C(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ae(e){return e}var Je="[object AsyncFunction]",Ye="[object Function]",Ze="[object GeneratorFunction]",Qe="[object Proxy]";function G(e){if(!C(e))return!1;var t=N(e);return t==Ye||t==Ze||t==Je||t==Qe}var L=P["__core-js_shared__"],ie=function(){var e=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ke(e){return!!ie&&ie in e}var et=Function.prototype,tt=et.toString;function nt(e){if(e!=null){try{return tt.call(e)}catch{}try{return e+""}catch{}}return""}var rt=/[\\^$.*+?()[\]{}|]/g,ot=/^\[object .+?Constructor\]$/,at=Function.prototype,it=Object.prototype,st=at.toString,ct=it.hasOwnProperty,ut=RegExp("^"+st.call(ct).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lt(e){if(!C(e)||ke(e))return!1;var t=G(e)?ut:ot;return t.test(nt(e))}function ft(e,t){return e==null?void 0:e[t]}function W(e,t){var n=ft(e,t);return lt(n)?n:void 0}var se=Object.create,dt=function(){function e(){}return function(t){if(!C(t))return{};if(se)return se(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function pt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ht(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var mt=800,yt=16,gt=Date.now;function vt(e){var t=0,n=0;return function(){var r=gt(),o=yt-(r-n);if(n=r,o>0){if(++t>=mt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function bt(e){return function(){return e}}var x=function(){try{var e=W(Object,"defineProperty");return e({},"",{}),e}catch{}}(),_t=x?function(e,t){return x(e,"toString",{configurable:!0,enumerable:!1,value:bt(t),writable:!0})}:ae,Ct=vt(_t),Tt=9007199254740991,Pt=/^(?:0|[1-9]\d*)$/;function ce(e,t){var n=typeof e;return t=t??Tt,!!t&&(n=="number"||n!="symbol"&&Pt.test(e))&&e>-1&&e%1==0&&e<t}function q(e,t,n){t=="__proto__"&&x?x(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function V(e,t){return e===t||e!==e&&t!==t}var jt=Object.prototype,Ot=jt.hasOwnProperty;function wt(e,t,n){var r=e[t];(!(Ot.call(e,t)&&V(r,n))||n===void 0&&!(t in e))&&q(e,t,n)}function St(e,t,n,r){var o=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var i=t[a],u=void 0;u===void 0&&(u=e[i]),o?q(n,i,u):wt(n,i,u)}return n}var ue=Math.max;function At(e,t,n){return t=ue(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=ue(r.length-t,0),c=Array(a);++o<a;)c[o]=r[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=r[o];return i[t]=n(c),pt(e,this,i)}}function $t(e,t){return Ct(At(e,t,ae),e+"")}var Dt=9007199254740991;function le(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Dt}function X(e){return e!=null&&le(e.length)&&!G(e)}function Et(e,t,n){if(!C(n))return!1;var r=typeof t;return(r=="number"?X(n)&&ce(t,n.length):r=="string"&&t in n)?V(n[t],e):!1}function It(e){return $t(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,c=o>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,c&&Et(n[0],n[1],c)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var i=n[r];i&&e(t,i,r,a)}return t})}var Mt=Object.prototype;function fe(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Mt;return e===n}function Nt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var xt="[object Arguments]";function de(e){return A(e)&&N(e)==xt}var pe=Object.prototype,Vt=pe.hasOwnProperty,Bt=pe.propertyIsEnumerable,J=de(function(){return arguments}())?de:function(e){return A(e)&&Vt.call(e,"callee")&&!Bt.call(e,"callee")};function Rt(){return!1}var he=typeof l=="object"&&l&&!l.nodeType&&l,me=he&&typeof module=="object"&&module&&!module.nodeType&&module,Ut=me&&me.exports===he,ye=Ut?P.Buffer:void 0,zt=ye?ye.isBuffer:void 0,ge=zt||Rt,Ft="[object Arguments]",Ht="[object Array]",Kt="[object Boolean]",Gt="[object Date]",Lt="[object Error]",Wt="[object Function]",qt="[object Map]",Xt="[object Number]",Jt="[object Object]",Yt="[object RegExp]",Zt="[object Set]",Qt="[object String]",kt="[object WeakMap]",en="[object ArrayBuffer]",tn="[object DataView]",nn="[object Float32Array]",rn="[object Float64Array]",on="[object Int8Array]",an="[object Int16Array]",sn="[object Int32Array]",cn="[object Uint8Array]",un="[object Uint8ClampedArray]",ln="[object Uint16Array]",fn="[object Uint32Array]",f={};f[nn]=f[rn]=f[on]=f[an]=f[sn]=f[cn]=f[un]=f[ln]=f[fn]=!0,f[Ft]=f[Ht]=f[en]=f[Kt]=f[tn]=f[Gt]=f[Lt]=f[Wt]=f[qt]=f[Xt]=f[Jt]=f[Yt]=f[Zt]=f[Qt]=f[kt]=!1;function dn(e){return A(e)&&le(e.length)&&!!f[N(e)]}function pn(e){return function(t){return e(t)}}var ve=typeof l=="object"&&l&&!l.nodeType&&l,$=ve&&typeof module=="object"&&module&&!module.nodeType&&module,hn=$&&$.exports===ve,Y=hn&&ne.process,be=function(){try{var e=$&&$.require&&$.require("util").types;return e||Y&&Y.binding&&Y.binding("util")}catch{}}(),_e=be&&be.isTypedArray,Ce=_e?pn(_e):dn;function mn(e,t){var n=K(e),r=!n&&J(e),o=!n&&!r&&ge(e),a=!n&&!r&&!o&&Ce(e),c=n||r||o||a,i=c?Nt(e.length,String):[],u=i.length;for(var p in e)c&&(p=="length"||o&&(p=="offset"||p=="parent")||a&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||ce(p,u))||i.push(p);return i}function yn(e,t){return function(n){return e(t(n))}}function gn(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var vn=Object.prototype,bn=vn.hasOwnProperty;function _n(e){if(!C(e))return gn(e);var t=fe(e),n=[];for(var r in e)r=="constructor"&&(t||!bn.call(e,r))||n.push(r);return n}function Te(e){return X(e)?mn(e):_n(e)}var D=W(Object,"create");function Cn(){this.__data__=D?D(null):{},this.size=0}function Tn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Pn="__lodash_hash_undefined__",jn=Object.prototype,On=jn.hasOwnProperty;function wn(e){var t=this.__data__;if(D){var n=t[e];return n===Pn?void 0:n}return On.call(t,e)?t[e]:void 0}var Sn=Object.prototype,An=Sn.hasOwnProperty;function $n(e){var t=this.__data__;return D?t[e]!==void 0:An.call(t,e)}var Dn="__lodash_hash_undefined__";function En(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=D&&t===void 0?Dn:t,this}function T(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}T.prototype.clear=Cn,T.prototype.delete=Tn,T.prototype.get=wn,T.prototype.has=$n,T.prototype.set=En;function In(){this.__data__=[],this.size=0}function B(e,t){for(var n=e.length;n--;)if(V(e[n][0],t))return n;return-1}var Mn=Array.prototype,Nn=Mn.splice;function xn(e){var t=this.__data__,n=B(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Nn.call(t,n,1),--this.size,!0}function Vn(e){var t=this.__data__,n=B(t,e);return n<0?void 0:t[n][1]}function Bn(e){return B(this.__data__,e)>-1}function Rn(e,t){var n=this.__data__,r=B(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function b(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}b.prototype.clear=In,b.prototype.delete=xn,b.prototype.get=Vn,b.prototype.has=Bn,b.prototype.set=Rn;var Pe=W(P,"Map");function Un(){this.size=0,this.__data__={hash:new T,map:new(Pe||b),string:new T}}function zn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function R(e,t){var n=e.__data__;return zn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Fn(e){var t=R(this,e).delete(e);return this.size-=t?1:0,t}function Hn(e){return R(this,e).get(e)}function Kn(e){return R(this,e).has(e)}function Gn(e,t){var n=R(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function j(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}j.prototype.clear=Un,j.prototype.delete=Fn,j.prototype.get=Hn,j.prototype.has=Kn,j.prototype.set=Gn;var je=yn(Object.getPrototypeOf,Object),Ln="[object Object]",Wn=Function.prototype,qn=Object.prototype,Oe=Wn.toString,Xn=qn.hasOwnProperty,Jn=Oe.call(Object);function Yn(e){if(!A(e)||N(e)!=Ln)return!1;var t=je(e);if(t===null)return!0;var n=Xn.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Oe.call(n)==Jn}function Zn(){this.__data__=new b,this.size=0}function Qn(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function kn(e){return this.__data__.get(e)}function er(e){return this.__data__.has(e)}var tr=200;function nr(e,t){var n=this.__data__;if(n instanceof b){var r=n.__data__;if(!Pe||r.length<tr-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new j(r)}return n.set(e,t),this.size=n.size,this}function O(e){var t=this.__data__=new b(e);this.size=t.size}O.prototype.clear=Zn,O.prototype.delete=Qn,O.prototype.get=kn,O.prototype.has=er,O.prototype.set=nr;var we=typeof l=="object"&&l&&!l.nodeType&&l,Se=we&&typeof module=="object"&&module&&!module.nodeType&&module,rr=Se&&Se.exports===we,Ae=rr?P.Buffer:void 0;Ae&&Ae.allocUnsafe;function or(e,t){return e.slice()}var $e=P.Uint8Array;function ar(e){var t=new e.constructor(e.byteLength);return new $e(t).set(new $e(e)),t}function ir(e,t){var n=ar(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function sr(e){return typeof e.constructor=="function"&&!fe(e)?dt(je(e)):{}}function cr(e){return function(t,n,r){for(var o=-1,a=Object(t),c=r(t),i=c.length;i--;){var u=c[++o];if(n(a[u],u,a)===!1)break}return t}}var ur=cr();function Z(e,t,n){(n!==void 0&&!V(e[t],n)||n===void 0&&!(t in e))&&q(e,t,n)}function lr(e){return A(e)&&X(e)}function Q(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function fr(e){return St(e,Te(e))}function dr(e,t,n,r,o,a,c){var i=Q(e,n),u=Q(t,n),p=c.get(u);if(p){Z(e,n,p);return}var d=a?a(i,u,n+"",e,t,c):void 0,g=d===void 0;if(g){var w=K(u),U=!w&&ge(u),m=!w&&!U&&Ce(u);d=u,w||U||m?K(i)?d=i:lr(i)?d=ht(i):U?(g=!1,d=or(u)):m?(g=!1,d=ir(u)):d=[]:Yn(u)||J(u)?(d=i,J(i)?d=fr(i):(!C(i)||G(i))&&(d=sr(u))):g=!1}g&&(c.set(u,d),o(d,u,r,a,c),c.delete(u)),Z(e,n,d)}function De(e,t,n,r,o){e!==t&&ur(t,function(a,c){if(o||(o=new O),C(a))dr(e,t,c,n,De,r,o);else{var i=r?r(Q(e,c),a,c+"",e,t,o):void 0;i===void 0&&(i=a),Z(e,c,i)}},Te)}var Ee=It(function(e,t,n){De(e,t,n)});const pr={overlay:!0,round:!0,lockScroll:!0,closeable:!0,closeOnClickOverlay:!1,style:{backgroundColor:"#fff",color:"#000"}},k=(e=!0)=>{const t=s.getCurrentInstance();return(r,o={})=>{const a=s.ref(e),c=H(t,s.h(s.defineComponent({setup(){const i=s.ref(),u=()=>{c.destroy()},p=()=>{c.emit(v.destory)},d=()=>{Promise.resolve().then(()=>{c.componentRef=i})};return()=>s.createVNode(Ne.Popup,s.mergeProps({ref:i,show:a.value,onClickCloseIcon:u,onClosed:p,onVnodeMounted:d},{...pr,...o.attrs}),{default:()=>r,...o.slots})}})),{provideProps:o.provideProps||{},appendTo:o.appendTo,visible:a});return c}},hr=(e=!0)=>{const t=k(e);return(n,r={})=>(Ee(r,{attrs:{position:"bottom",style:{width:"100vw"}}}),t(n,r))},Ie=(e=!0)=>{const t=k(e);return(n,r={})=>{const o=s.createVNode("div",{class:"w-full h-full"},[r.title&&s.createVNode("div",{class:"vant-popup-title"},[s.createVNode("div",{class:"vant-popup-title-text",innerHTML:r.title},null)]),n]);return t(o,r)}},mr=(e=!0)=>{const t=Ie(e);return(n,r={})=>(Ee(r,{attrs:{position:"bottom",style:{width:"100vw"}}}),t(n,r))};l.CommandDialogConsumerInjectKey=z,l.CommandDialogProvider=H,l.CommandDialogStackInjectKey=F,l.EVENT_NAME=v,l.createElementPlusDialog=Ue,l.createVantUiPopup=k,l.createVantUiPopupOnBottom=hr,l.createVantUiTitlePopup=Ie,l.createVantUiTitlePopupOnBottom=mr,l.getCommandDialogConsumer=Re,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
