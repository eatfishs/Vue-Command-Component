(function(s,u){typeof exports=="object"&&typeof module<"u"?u(exports,require("vue"),require("element-plus"),require("vant")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus","vant"],u):(s=typeof globalThis<"u"?globalThis:s||self,u(s.Vue3CommandDialog={},s.Vue,s.ElementPlus,s.Vant))})(this,function(s,u,b,Fe){"use strict";var Sr=Object.defineProperty;var Ar=(s,u,b)=>u in s?Sr(s,u,{enumerable:!0,configurable:!0,writable:!0,value:b}):s[u]=b;var Ue=(s,u,b)=>Ar(s,typeof u!="symbol"?u+"":u,b);var g=(e=>(e.confirm="confirm",e.cancel="cancel",e.destory="destory",e))(g||{});class ne{constructor(){Ue(this,"map",new WeakMap)}getEventsMapByConsumer(t){let n=this.map.get(t);return n||(n=new Map,this.map.set(t,n)),n}getEventsByConsumer(t,n){const r=this.getEventsMapByConsumer(t);let o=r.get(n);return o||(o=new Set,r.set(n,o)),o}on(t,n,r,o={}){const a=this.getEventsByConsumer(t,n);let l=r;o.once&&(l=(...i)=>{r(...i),this.off(t,n,l)}),a.add(l),o.callAfterDelay!==void 0&&setTimeout(()=>{l()},o.callAfterDelay||0)}once(t,n,r){this.on(t,n,r,{once:!0})}emit(t,n,...r){this.getEventsByConsumer(t,n).forEach(a=>a(...r))}off(t,n,r){this.getEventsByConsumer(t,n).delete(r)}}const re=(e="")=>e.slice(2).toLowerCase(),G=(e="")=>`on${e.charAt(0).toUpperCase()}${e.slice(1)}`,oe=()=>{let e=()=>{},t=()=>{};return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}},Ke=e=>{var r;const t=((r=e.parentElement)==null?void 0:r.children)||[];let n=0;return Array.from(t).forEach(o=>{if(o!==e){const a=parseInt(window.getComputedStyle(o).zIndex);!isNaN(a)&&a>n&&(n=a)}}),n},M=e=>e==null,H=Symbol("CommandComponentConsumerInjectKey"),L=Symbol("CommandComponentStackInjectKey"),D=new ne,B=new Set,Ge=()=>{console.log("destroyAllCommandComponentConsumer"),B.forEach(e=>{e.destroy()})},ae=e=>({...e.parent?ae(e.parent):{},...e.provides});function x(e,t,n){const r=(typeof n.appendTo=="string"?document.querySelector(n.appendTo):n.appendTo)||document.body,o=document.createElement("div");o.className=n.customClassName||"command-commponent-container",r.appendChild(o);const a=()=>{n.visible.value=!1},l=()=>{n.visible.value=!0},i=()=>{u.nextTick(()=>{u.render(null,o),o.remove()})},c=(h=!1)=>{h?(m.on(g.destory,i,{once:!0,callAfterDelay:3e3}),a()):(B.delete(m),m.stack.splice(m.stackIndex).forEach(v=>v.destroy(!0)))},{promise:p,resolve:f,reject:y}=oe(),T=h=>{f(h),c()},_=h=>{y(h),c()},m={meta:n.meta||{},promise:p,resolve:f,reject:y,destroyWithResolve:T,destroyWithReject:_,hide:a,show:l,destroy:c,container:o,visible:n.visible,on:(h,v,Er={})=>D.on(m,h,v,Er),once:(h,v)=>D.once(m,h,v),emit:(h,...v)=>D.emit(m,h,...v),off:(h,v)=>D.off(m,h,v),stack:[],stackIndex:-1,componentRef:void 0},Or=u.defineComponent({setup(){for(const v in n.provideProps)u.provide(v,n.provideProps[v]);u.provide(H,m);const h=u.inject(L,[]);return m.stackIndex=h.length,h.push(m),u.provide(L,h),m.stack=h,()=>t}}),N=u.createVNode(Or,null,null);return N.appContext=(e==null?void 0:e.appContext)||N.appContext,N.appContext.provides={...N.appContext.provides,...ae(e)},u.render(N,o),B.add(m),m}const se=(e=!0)=>{const t=()=>e&&console.warn(`别调用了欧尼酱~,这会儿没啥实际用途;没有根据CommandComponentConsumerInjectKey接收到注入数据.原因可能有两个:
    1.你可能对getConsumer进行了异步调用或条件调用,请在setup中直接调用.
    2.你没有在命令弹窗内展示该组件,这个时候你一般可以忽略该警告消息.`);return u.inject(H,()=>new Proxy({},{get:()=>t,apply:t}),!0)},He=(...e)=>(console.warn("Warning: This API will be deprecated in the future, please use `getConsumer` instead."),se(...e));let ie;const Le=e=>{ie=e},We=(e={})=>{const t=u.getCurrentInstance(),{locale:{t:n}}=b.useGlobalComponentSettings("message-box");return(o,a={})=>{const l=u.ref(M(e.immediately)?!0:!!e.immediately),i=x(t,u.h(u.defineComponent({setup(){const c=u.ref(),p=()=>{Promise.resolve().then(()=>{i.componentRef=c})},f=T=>{T(),i.destroy()},y=(...T)=>{var _,m;return i.emit(g.destory),(m=(_=a.attrs)==null?void 0:_.onClosed)==null?void 0:m.call(_,...T)};return()=>u.createVNode(b.ElDialog,u.mergeProps({ref:c,modelValue:l.value,beforeClose:f,onVnodeMounted:p},{title:a.title,width:a.width,...a.attrs},{onClosed:y}),{default:()=>o,footer:()=>u.createVNode("div",null,[a[G(g.cancel)]&&u.createVNode(b.ElButton,{onClick:()=>i.emit(g.cancel)},{default:()=>[a.cancelBtnText||n("el.messagebox.cancel")]}),a[G(g.confirm)]&&u.createVNode(b.ElButton,{type:"primary",onClick:()=>i.emit(g.confirm)},{default:()=>[a.confirmBtnText||n("el.messagebox.confirm")]})]),...a.slots})}})),{provideProps:a.provideProps||{},appendTo:ie||a.appendTo,visible:l,meta:{...(e==null?void 0:e.meta)||{name:"command-element-plus-dialog"},...(a==null?void 0:a.meta)||{}}});return Object.entries(a).filter(([c,p])=>c.startsWith("on")&&typeof p=="function").forEach(([c,p])=>{const f=re(c);i.on(f,p)}),i}};let ue;const qe=e=>{ue=e},Ze=(e={})=>{const t=u.getCurrentInstance();return(r,o={})=>{const a=u.ref(M(e.immediately)?!0:!!e.immediately),l=x(t,u.h(u.defineComponent({setup(){const i=y=>{y(),l.destroy()},c=()=>{l.emit(g.destory)},p=u.ref(),f=()=>{Promise.resolve().then(()=>{l.componentRef=p})};return()=>u.createVNode(b.ElDrawer,u.mergeProps({ref:p,modelValue:a.value,beforeClose:i,onClosed:c,onVnodeMounted:f},{title:o.title,size:o.size,...o.attrs}),{default:()=>r,...o.slots})}})),{provideProps:o.provideProps||{},appendTo:ue||o.appendTo,visible:a,meta:{...(e==null?void 0:e.meta)||{name:"command-element-plus-drawer"},...(o==null?void 0:o.meta)||{}}});return l}};var le=typeof global=="object"&&global&&global.Object===Object&&global,Xe=typeof self=="object"&&self&&self.Object===Object&&self,j=le||Xe||Function("return this")(),R=j.Symbol,ce=Object.prototype,Je=ce.hasOwnProperty,Ye=ce.toString,S=R?R.toStringTag:void 0;function Qe(e){var t=Je.call(e,S),n=e[S];try{e[S]=void 0;var r=!0}catch{}var o=Ye.call(e);return r&&(t?e[S]=n:delete e[S]),o}var ke=Object.prototype,et=ke.toString;function tt(e){return et.call(e)}var nt="[object Null]",rt="[object Undefined]",de=R?R.toStringTag:void 0;function z(e){return e==null?e===void 0?rt:nt:de&&de in Object(e)?Qe(e):tt(e)}function A(e){return e!=null&&typeof e=="object"}var W=Array.isArray;function P(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function pe(e){return e}var ot="[object AsyncFunction]",at="[object Function]",st="[object GeneratorFunction]",it="[object Proxy]";function q(e){if(!P(e))return!1;var t=z(e);return t==at||t==st||t==ot||t==it}var Z=j["__core-js_shared__"],fe=function(){var e=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ut(e){return!!fe&&fe in e}var lt=Function.prototype,ct=lt.toString;function dt(e){if(e!=null){try{return ct.call(e)}catch{}try{return e+""}catch{}}return""}var pt=/[\\^$.*+?()[\]{}|]/g,ft=/^\[object .+?Constructor\]$/,mt=Function.prototype,ht=Object.prototype,yt=mt.toString,vt=ht.hasOwnProperty,bt=RegExp("^"+yt.call(vt).replace(pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gt(e){if(!P(e)||ut(e))return!1;var t=q(e)?bt:ft;return t.test(dt(e))}function _t(e,t){return e==null?void 0:e[t]}function X(e,t){var n=_t(e,t);return gt(n)?n:void 0}var me=Object.create,Ct=function(){function e(){}return function(t){if(!P(t))return{};if(me)return me(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Tt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Pt(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var wt=800,jt=16,Ot=Date.now;function Et(e){var t=0,n=0;return function(){var r=Ot(),o=jt-(r-n);if(n=r,o>0){if(++t>=wt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function St(e){return function(){return e}}var V=function(){try{var e=X(Object,"defineProperty");return e({},"",{}),e}catch{}}(),At=V?function(e,t){return V(e,"toString",{configurable:!0,enumerable:!1,value:St(t),writable:!0})}:pe,$t=Et(At),It=9007199254740991,Nt=/^(?:0|[1-9]\d*)$/;function he(e,t){var n=typeof e;return t=t??It,!!t&&(n=="number"||n!="symbol"&&Nt.test(e))&&e>-1&&e%1==0&&e<t}function J(e,t,n){t=="__proto__"&&V?V(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function U(e,t){return e===t||e!==e&&t!==t}var Mt=Object.prototype,Dt=Mt.hasOwnProperty;function Bt(e,t,n){var r=e[t];(!(Dt.call(e,t)&&U(r,n))||n===void 0&&!(t in e))&&J(e,t,n)}function xt(e,t,n,r){var o=!n;n||(n={});for(var a=-1,l=t.length;++a<l;){var i=t[a],c=void 0;c===void 0&&(c=e[i]),o?J(n,i,c):Bt(n,i,c)}return n}var ye=Math.max;function Rt(e,t,n){return t=ye(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=ye(r.length-t,0),l=Array(a);++o<a;)l[o]=r[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=r[o];return i[t]=n(l),Tt(e,this,i)}}function zt(e,t){return $t(Rt(e,t,pe),e+"")}var Vt=9007199254740991;function ve(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Vt}function Y(e){return e!=null&&ve(e.length)&&!q(e)}function Ut(e,t,n){if(!P(n))return!1;var r=typeof t;return(r=="number"?Y(n)&&he(t,n.length):r=="string"&&t in n)?U(n[t],e):!1}function Ft(e){return zt(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,l=o>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,l&&Ut(n[0],n[1],l)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var i=n[r];i&&e(t,i,r,a)}return t})}var Kt=Object.prototype;function be(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Kt;return e===n}function Gt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Ht="[object Arguments]";function ge(e){return A(e)&&z(e)==Ht}var _e=Object.prototype,Lt=_e.hasOwnProperty,Wt=_e.propertyIsEnumerable,Q=ge(function(){return arguments}())?ge:function(e){return A(e)&&Lt.call(e,"callee")&&!Wt.call(e,"callee")};function qt(){return!1}var Ce=typeof s=="object"&&s&&!s.nodeType&&s,Te=Ce&&typeof module=="object"&&module&&!module.nodeType&&module,Zt=Te&&Te.exports===Ce,Pe=Zt?j.Buffer:void 0,Xt=Pe?Pe.isBuffer:void 0,we=Xt||qt,Jt="[object Arguments]",Yt="[object Array]",Qt="[object Boolean]",kt="[object Date]",en="[object Error]",tn="[object Function]",nn="[object Map]",rn="[object Number]",on="[object Object]",an="[object RegExp]",sn="[object Set]",un="[object String]",ln="[object WeakMap]",cn="[object ArrayBuffer]",dn="[object DataView]",pn="[object Float32Array]",fn="[object Float64Array]",mn="[object Int8Array]",hn="[object Int16Array]",yn="[object Int32Array]",vn="[object Uint8Array]",bn="[object Uint8ClampedArray]",gn="[object Uint16Array]",_n="[object Uint32Array]",d={};d[pn]=d[fn]=d[mn]=d[hn]=d[yn]=d[vn]=d[bn]=d[gn]=d[_n]=!0,d[Jt]=d[Yt]=d[cn]=d[Qt]=d[dn]=d[kt]=d[en]=d[tn]=d[nn]=d[rn]=d[on]=d[an]=d[sn]=d[un]=d[ln]=!1;function Cn(e){return A(e)&&ve(e.length)&&!!d[z(e)]}function Tn(e){return function(t){return e(t)}}var je=typeof s=="object"&&s&&!s.nodeType&&s,$=je&&typeof module=="object"&&module&&!module.nodeType&&module,Pn=$&&$.exports===je,k=Pn&&le.process,Oe=function(){try{var e=$&&$.require&&$.require("util").types;return e||k&&k.binding&&k.binding("util")}catch{}}(),Ee=Oe&&Oe.isTypedArray,Se=Ee?Tn(Ee):Cn;function wn(e,t){var n=W(e),r=!n&&Q(e),o=!n&&!r&&we(e),a=!n&&!r&&!o&&Se(e),l=n||r||o||a,i=l?Gt(e.length,String):[],c=i.length;for(var p in e)l&&(p=="length"||o&&(p=="offset"||p=="parent")||a&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||he(p,c))||i.push(p);return i}function jn(e,t){return function(n){return e(t(n))}}function On(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var En=Object.prototype,Sn=En.hasOwnProperty;function An(e){if(!P(e))return On(e);var t=be(e),n=[];for(var r in e)r=="constructor"&&(t||!Sn.call(e,r))||n.push(r);return n}function Ae(e){return Y(e)?wn(e):An(e)}var I=X(Object,"create");function $n(){this.__data__=I?I(null):{},this.size=0}function In(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Nn="__lodash_hash_undefined__",Mn=Object.prototype,Dn=Mn.hasOwnProperty;function Bn(e){var t=this.__data__;if(I){var n=t[e];return n===Nn?void 0:n}return Dn.call(t,e)?t[e]:void 0}var xn=Object.prototype,Rn=xn.hasOwnProperty;function zn(e){var t=this.__data__;return I?t[e]!==void 0:Rn.call(t,e)}var Vn="__lodash_hash_undefined__";function Un(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=I&&t===void 0?Vn:t,this}function w(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}w.prototype.clear=$n,w.prototype.delete=In,w.prototype.get=Bn,w.prototype.has=zn,w.prototype.set=Un;function Fn(){this.__data__=[],this.size=0}function F(e,t){for(var n=e.length;n--;)if(U(e[n][0],t))return n;return-1}var Kn=Array.prototype,Gn=Kn.splice;function Hn(e){var t=this.__data__,n=F(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Gn.call(t,n,1),--this.size,!0}function Ln(e){var t=this.__data__,n=F(t,e);return n<0?void 0:t[n][1]}function Wn(e){return F(this.__data__,e)>-1}function qn(e,t){var n=this.__data__,r=F(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function C(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}C.prototype.clear=Fn,C.prototype.delete=Hn,C.prototype.get=Ln,C.prototype.has=Wn,C.prototype.set=qn;var $e=X(j,"Map");function Zn(){this.size=0,this.__data__={hash:new w,map:new($e||C),string:new w}}function Xn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function K(e,t){var n=e.__data__;return Xn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Jn(e){var t=K(this,e).delete(e);return this.size-=t?1:0,t}function Yn(e){return K(this,e).get(e)}function Qn(e){return K(this,e).has(e)}function kn(e,t){var n=K(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function O(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}O.prototype.clear=Zn,O.prototype.delete=Jn,O.prototype.get=Yn,O.prototype.has=Qn,O.prototype.set=kn;var Ie=jn(Object.getPrototypeOf,Object),er="[object Object]",tr=Function.prototype,nr=Object.prototype,Ne=tr.toString,rr=nr.hasOwnProperty,or=Ne.call(Object);function ar(e){if(!A(e)||z(e)!=er)return!1;var t=Ie(e);if(t===null)return!0;var n=rr.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Ne.call(n)==or}function sr(){this.__data__=new C,this.size=0}function ir(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function ur(e){return this.__data__.get(e)}function lr(e){return this.__data__.has(e)}var cr=200;function dr(e,t){var n=this.__data__;if(n instanceof C){var r=n.__data__;if(!$e||r.length<cr-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new O(r)}return n.set(e,t),this.size=n.size,this}function E(e){var t=this.__data__=new C(e);this.size=t.size}E.prototype.clear=sr,E.prototype.delete=ir,E.prototype.get=ur,E.prototype.has=lr,E.prototype.set=dr;var Me=typeof s=="object"&&s&&!s.nodeType&&s,De=Me&&typeof module=="object"&&module&&!module.nodeType&&module,pr=De&&De.exports===Me,Be=pr?j.Buffer:void 0;Be&&Be.allocUnsafe;function fr(e,t){return e.slice()}var xe=j.Uint8Array;function mr(e){var t=new e.constructor(e.byteLength);return new xe(t).set(new xe(e)),t}function hr(e,t){var n=mr(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function yr(e){return typeof e.constructor=="function"&&!be(e)?Ct(Ie(e)):{}}function vr(e){return function(t,n,r){for(var o=-1,a=Object(t),l=r(t),i=l.length;i--;){var c=l[++o];if(n(a[c],c,a)===!1)break}return t}}var br=vr();function ee(e,t,n){(n!==void 0&&!U(e[t],n)||n===void 0&&!(t in e))&&J(e,t,n)}function gr(e){return A(e)&&Y(e)}function te(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function _r(e){return xt(e,Ae(e))}function Cr(e,t,n,r,o,a,l){var i=te(e,n),c=te(t,n),p=l.get(c);if(p){ee(e,n,p);return}var f=a?a(i,c,n+"",e,t,l):void 0,y=f===void 0;if(y){var T=W(c),_=!T&&we(c),m=!T&&!_&&Se(c);f=c,T||_||m?W(i)?f=i:gr(i)?f=Pt(i):_?(y=!1,f=fr(c)):m?(y=!1,f=hr(c)):f=[]:ar(c)||Q(c)?(f=i,Q(i)?f=_r(i):(!P(i)||q(i))&&(f=yr(c))):y=!1}y&&(l.set(c,f),o(f,c,r,a,l),l.delete(c)),ee(e,n,f)}function Re(e,t,n,r,o){e!==t&&br(t,function(a,l){if(o||(o=new E),P(a))Cr(e,t,l,n,Re,r,o);else{var i=r?r(te(e,l),a,l+"",e,t,o):void 0;i===void 0&&(i=a),ee(e,l,i)}},Ae)}var Tr=Ft(function(e,t,n){Re(e,t,n)});let ze;const Pr=e=>{ze=e},wr={round:!0,lockScroll:!0,closeable:!0,style:{backgroundColor:"#fff",color:"#000"}},Ve=(e={})=>{const t=u.getCurrentInstance();return(r,o={})=>{const a=u.ref(M(e.immediately)?!0:!!e.immediately),l=x(t,u.h(u.defineComponent({setup(){const i=()=>{l.destroy()},c=()=>{l.emit(g.destory)},p=u.ref(),f=()=>{Promise.resolve().then(()=>{l.componentRef=p})};return()=>u.createVNode(Fe.Popup,u.mergeProps({ref:p,show:a.value,onClickCloseIcon:i,onClosed:c,onVnodeMounted:f},{...wr,...o.attrs}),{default:()=>r,...o.slots})}})),{provideProps:o.provideProps||{},appendTo:ze||o.appendTo,visible:a,meta:{...(e==null?void 0:e.meta)||{name:"command-vant-ui-popup"},...(o==null?void 0:o.meta)||{}}});return l}},jr=(e={})=>{const t=Ve(e);return(n,r={})=>(Tr(r,{attrs:{position:"bottom",style:{width:"100vw"}}}),t(n,r))};s.CommandComponentConsumerInjectKey=H,s.CommandComponentStackInjectKey=L,s.CommandProvider=x,s.ConsumerEventBus=ne,s.EVENT_NAME=g,s.PromiseWithResolvers=oe,s.activeCommandComponentConsumers=B,s.busName2EventName=G,s.createElementPlusDialog=We,s.createElementPlusDrawer=Ze,s.createVantUiPopup=Ve,s.createVantUiPopupOnBottom=jr,s.destroyAllCommandComponentConsumer=Ge,s.eventName2BusName=re,s.getCommandDialogConsumer=He,s.getConsumer=se,s.getMaxZIndex=Ke,s.isNull=M,s.setElementPlusDialogMountNode=Le,s.setElementPlusDrawerMountNode=qe,s.setVantUiPopupMountNode=Pr,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
