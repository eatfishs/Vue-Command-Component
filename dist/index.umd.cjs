(function(u,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue"),require("element-plus"),require("vant")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus","vant"],s):(u=typeof globalThis<"u"?globalThis:u||self,s(u.Vue3CommandDialog={},u.Vue,u.ElementPlus,u.Vant))})(this,function(u,s,C,Be){"use strict";var jr=Object.defineProperty;var Or=(u,s,C)=>s in u?jr(u,s,{enumerable:!0,configurable:!0,writable:!0,value:C}):u[s]=C;var Ve=(u,s,C)=>Or(u,typeof s!="symbol"?s+"":s,C);class Ue{constructor(){Ve(this,"map",new WeakMap)}getEventsMapByConsumer(t){let n=this.map.get(t);return n||(n=new Map,this.map.set(t,n)),n}getEventsByConsumer(t,n){const r=this.getEventsMapByConsumer(t);let o=r.get(n);return o||(o=new Set,r.set(n,o)),o}on(t,n,r,o={}){const a=this.getEventsByConsumer(t,n);let c=r;o.once&&(c=(...i)=>{r(...i),this.off(t,n,c)}),a.add(c),o.callAfterDelay!==void 0&&setTimeout(()=>{c()},o.callAfterDelay||0)}once(t,n,r){this.on(t,n,r,{once:!0})}emit(t,n,...r){this.getEventsByConsumer(t,n).forEach(a=>a(...r))}off(t,n,r){this.getEventsByConsumer(t,n).delete(r)}}const Re=(e="")=>e.slice(2).toLowerCase(),te=(e="")=>`on${e.charAt(0).toUpperCase()}${e.slice(1)}`,ze=()=>{let e=()=>{},t=()=>{};return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}},Fe=e=>{var r;const t=((r=e.parentElement)==null?void 0:r.children)||[];let n=0;return Array.from(t).forEach(o=>{if(o!==e){const a=parseInt(window.getComputedStyle(o).zIndex);!isNaN(a)&&a>n&&(n=a)}}),n};var v=(e=>(e.confirm="confirm",e.cancel="cancel",e.destory="destory",e))(v||{});const z=Symbol("CommandDialogConsumerInjectKey"),F=Symbol("CommandDialogStackInjectKey"),D=new Ue,ne=e=>({...e.parent?ne(e.parent):{},...e.provides});function H(e,t,n){const r=(typeof n.appendTo=="string"?document.querySelector(n.appendTo):n.appendTo)||document.body,o=document.createElement("div");o.className="command-commponent-container",r.appendChild(o);const a=Fe(o);o.style.position="relative",o.style.zIndex=String(Math.max(a+1,9999));const c=()=>{n.visible.value=!1},i=()=>{n.visible.value=!0},l=()=>{s.nextTick(()=>{s.render(null,o),o.remove()})},d=(h=!1)=>{h?(m.on(v.destory,l,{once:!0,callAfterDelay:3e3}),c()):m.stack.splice(m.stackIndex).forEach(y=>y.destroy(!0))},{promise:p,resolve:g,reject:_}=ze(),m={promise:p,resolve:g,reject:_,destroyWithResolve:h=>{g(h),d()},destroyWithReject:h=>{_(h),d()},hide:c,show:i,destroy:d,container:o,visible:n.visible,on:(h,y,Pr={})=>D.on(m,h,y,Pr),once:(h,y)=>D.once(m,h,y),emit:(h,...y)=>D.emit(m,h,...y),off:(h,y)=>D.off(m,h,y),stack:[],stackIndex:-1,componentRef:void 0},Tr=s.defineComponent({setup(){for(const y in n.provideProps)s.provide(y,n.provideProps[y]);s.provide(z,m);const h=s.inject(F,[]);return m.stackIndex=h.length,h.push(m),s.provide(F,h),m.stack=h,()=>t}}),E=s.createVNode(Tr,null,null);return E.appContext=(e==null?void 0:e.appContext)||E.appContext,E.appContext.provides={...E.appContext.provides,...ne(e)},s.render(E,o),m}const He=(e=!0)=>{const t=()=>e&&console.warn(`别调用了欧尼酱~,这会儿没啥实际用途;没有根据CommandDialogInjectKey接收到注入数据.原因可能有两个:
    1.你可能对getCommandDialogConsumer进行了异步调用或条件调用,请在setup中直接调用.
    2.你没有在命令弹窗内展示该组件,这个时候你一般可以忽略该警告消息.`);return s.inject(z,()=>new Proxy({},{get:()=>t,apply:t}),!0)};let re;const Ke=e=>{re=e},Ge=(e=!0)=>{const t=s.getCurrentInstance(),{locale:{t:n}}=C.useGlobalComponentSettings("message-box");return(o,a={})=>{const c=s.ref(e),i=H(t,s.h(s.defineComponent({setup(){const l=s.ref(),d=_=>{_(),i.destroy()},p=()=>{i.emit(v.destory)},g=()=>{Promise.resolve().then(()=>{i.componentRef=l})};return()=>s.createVNode(C.ElDialog,s.mergeProps({ref:l,modelValue:c.value,beforeClose:d,onClosed:p,onVnodeMounted:g},{title:a.title,width:a.width,...a.attrs}),{default:()=>o,footer:()=>s.createVNode("div",null,[a[te(v.cancel)]&&s.createVNode(s.resolveComponent("el-button"),{onClick:()=>i.emit(v.cancel)},{default:()=>[a.cancelBtnText||n("el.messagebox.cancel")]}),a[te(v.confirm)]&&s.createVNode(s.resolveComponent("el-button"),{type:"primary",onClick:()=>i.emit(v.confirm)},{default:()=>[a.confirmBtnText||n("el.messagebox.confirm")]})]),...a.slots})}})),{provideProps:a.provideProps||{},appendTo:re||a.appendTo,visible:c});return Object.entries(a).filter(([l,d])=>l.startsWith("on")&&typeof d=="function").forEach(([l,d])=>{const p=Re(l);i.on(p,d)}),i}};var oe=typeof global=="object"&&global&&global.Object===Object&&global,Le=typeof self=="object"&&self&&self.Object===Object&&self,j=oe||Le||Function("return this")(),M=j.Symbol,ae=Object.prototype,We=ae.hasOwnProperty,qe=ae.toString,S=M?M.toStringTag:void 0;function Ze(e){var t=We.call(e,S),n=e[S];try{e[S]=void 0;var r=!0}catch{}var o=qe.call(e);return r&&(t?e[S]=n:delete e[S]),o}var Xe=Object.prototype,Je=Xe.toString;function Ye(e){return Je.call(e)}var Qe="[object Null]",ke="[object Undefined]",ie=M?M.toStringTag:void 0;function x(e){return e==null?e===void 0?ke:Qe:ie&&ie in Object(e)?Ze(e):Ye(e)}function A(e){return e!=null&&typeof e=="object"}var K=Array.isArray;function T(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function se(e){return e}var et="[object AsyncFunction]",tt="[object Function]",nt="[object GeneratorFunction]",rt="[object Proxy]";function G(e){if(!T(e))return!1;var t=x(e);return t==tt||t==nt||t==et||t==rt}var L=j["__core-js_shared__"],ce=function(){var e=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ot(e){return!!ce&&ce in e}var at=Function.prototype,it=at.toString;function st(e){if(e!=null){try{return it.call(e)}catch{}try{return e+""}catch{}}return""}var ct=/[\\^$.*+?()[\]{}|]/g,ut=/^\[object .+?Constructor\]$/,lt=Function.prototype,ft=Object.prototype,dt=lt.toString,pt=ft.hasOwnProperty,ht=RegExp("^"+dt.call(pt).replace(ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mt(e){if(!T(e)||ot(e))return!1;var t=G(e)?ht:ut;return t.test(st(e))}function yt(e,t){return e==null?void 0:e[t]}function W(e,t){var n=yt(e,t);return mt(n)?n:void 0}var ue=Object.create,gt=function(){function e(){}return function(t){if(!T(t))return{};if(ue)return ue(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function vt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function bt(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var _t=800,Ct=16,Tt=Date.now;function Pt(e){var t=0,n=0;return function(){var r=Tt(),o=Ct-(r-n);if(n=r,o>0){if(++t>=_t)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function jt(e){return function(){return e}}var N=function(){try{var e=W(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ot=N?function(e,t){return N(e,"toString",{configurable:!0,enumerable:!1,value:jt(t),writable:!0})}:se,wt=Pt(Ot),St=9007199254740991,At=/^(?:0|[1-9]\d*)$/;function le(e,t){var n=typeof e;return t=t??St,!!t&&(n=="number"||n!="symbol"&&At.test(e))&&e>-1&&e%1==0&&e<t}function q(e,t,n){t=="__proto__"&&N?N(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function V(e,t){return e===t||e!==e&&t!==t}var $t=Object.prototype,It=$t.hasOwnProperty;function Et(e,t,n){var r=e[t];(!(It.call(e,t)&&V(r,n))||n===void 0&&!(t in e))&&q(e,t,n)}function Dt(e,t,n,r){var o=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var i=t[a],l=void 0;l===void 0&&(l=e[i]),o?q(n,i,l):Et(n,i,l)}return n}var fe=Math.max;function Mt(e,t,n){return t=fe(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=fe(r.length-t,0),c=Array(a);++o<a;)c[o]=r[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=r[o];return i[t]=n(c),vt(e,this,i)}}function xt(e,t){return wt(Mt(e,t,se),e+"")}var Nt=9007199254740991;function de(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Nt}function Z(e){return e!=null&&de(e.length)&&!G(e)}function Vt(e,t,n){if(!T(n))return!1;var r=typeof t;return(r=="number"?Z(n)&&le(t,n.length):r=="string"&&t in n)?V(n[t],e):!1}function Bt(e){return xt(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,c=o>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,c&&Vt(n[0],n[1],c)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var i=n[r];i&&e(t,i,r,a)}return t})}var Ut=Object.prototype;function pe(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Ut;return e===n}function Rt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var zt="[object Arguments]";function he(e){return A(e)&&x(e)==zt}var me=Object.prototype,Ft=me.hasOwnProperty,Ht=me.propertyIsEnumerable,X=he(function(){return arguments}())?he:function(e){return A(e)&&Ft.call(e,"callee")&&!Ht.call(e,"callee")};function Kt(){return!1}var ye=typeof u=="object"&&u&&!u.nodeType&&u,ge=ye&&typeof module=="object"&&module&&!module.nodeType&&module,Gt=ge&&ge.exports===ye,ve=Gt?j.Buffer:void 0,Lt=ve?ve.isBuffer:void 0,be=Lt||Kt,Wt="[object Arguments]",qt="[object Array]",Zt="[object Boolean]",Xt="[object Date]",Jt="[object Error]",Yt="[object Function]",Qt="[object Map]",kt="[object Number]",en="[object Object]",tn="[object RegExp]",nn="[object Set]",rn="[object String]",on="[object WeakMap]",an="[object ArrayBuffer]",sn="[object DataView]",cn="[object Float32Array]",un="[object Float64Array]",ln="[object Int8Array]",fn="[object Int16Array]",dn="[object Int32Array]",pn="[object Uint8Array]",hn="[object Uint8ClampedArray]",mn="[object Uint16Array]",yn="[object Uint32Array]",f={};f[cn]=f[un]=f[ln]=f[fn]=f[dn]=f[pn]=f[hn]=f[mn]=f[yn]=!0,f[Wt]=f[qt]=f[an]=f[Zt]=f[sn]=f[Xt]=f[Jt]=f[Yt]=f[Qt]=f[kt]=f[en]=f[tn]=f[nn]=f[rn]=f[on]=!1;function gn(e){return A(e)&&de(e.length)&&!!f[x(e)]}function vn(e){return function(t){return e(t)}}var _e=typeof u=="object"&&u&&!u.nodeType&&u,$=_e&&typeof module=="object"&&module&&!module.nodeType&&module,bn=$&&$.exports===_e,J=bn&&oe.process,Ce=function(){try{var e=$&&$.require&&$.require("util").types;return e||J&&J.binding&&J.binding("util")}catch{}}(),Te=Ce&&Ce.isTypedArray,Pe=Te?vn(Te):gn;function _n(e,t){var n=K(e),r=!n&&X(e),o=!n&&!r&&be(e),a=!n&&!r&&!o&&Pe(e),c=n||r||o||a,i=c?Rt(e.length,String):[],l=i.length;for(var d in e)c&&(d=="length"||o&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||le(d,l))||i.push(d);return i}function Cn(e,t){return function(n){return e(t(n))}}function Tn(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Pn=Object.prototype,jn=Pn.hasOwnProperty;function On(e){if(!T(e))return Tn(e);var t=pe(e),n=[];for(var r in e)r=="constructor"&&(t||!jn.call(e,r))||n.push(r);return n}function je(e){return Z(e)?_n(e):On(e)}var I=W(Object,"create");function wn(){this.__data__=I?I(null):{},this.size=0}function Sn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var An="__lodash_hash_undefined__",$n=Object.prototype,In=$n.hasOwnProperty;function En(e){var t=this.__data__;if(I){var n=t[e];return n===An?void 0:n}return In.call(t,e)?t[e]:void 0}var Dn=Object.prototype,Mn=Dn.hasOwnProperty;function xn(e){var t=this.__data__;return I?t[e]!==void 0:Mn.call(t,e)}var Nn="__lodash_hash_undefined__";function Vn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=I&&t===void 0?Nn:t,this}function P(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}P.prototype.clear=wn,P.prototype.delete=Sn,P.prototype.get=En,P.prototype.has=xn,P.prototype.set=Vn;function Bn(){this.__data__=[],this.size=0}function B(e,t){for(var n=e.length;n--;)if(V(e[n][0],t))return n;return-1}var Un=Array.prototype,Rn=Un.splice;function zn(e){var t=this.__data__,n=B(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Rn.call(t,n,1),--this.size,!0}function Fn(e){var t=this.__data__,n=B(t,e);return n<0?void 0:t[n][1]}function Hn(e){return B(this.__data__,e)>-1}function Kn(e,t){var n=this.__data__,r=B(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function b(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}b.prototype.clear=Bn,b.prototype.delete=zn,b.prototype.get=Fn,b.prototype.has=Hn,b.prototype.set=Kn;var Oe=W(j,"Map");function Gn(){this.size=0,this.__data__={hash:new P,map:new(Oe||b),string:new P}}function Ln(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function U(e,t){var n=e.__data__;return Ln(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Wn(e){var t=U(this,e).delete(e);return this.size-=t?1:0,t}function qn(e){return U(this,e).get(e)}function Zn(e){return U(this,e).has(e)}function Xn(e,t){var n=U(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function O(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}O.prototype.clear=Gn,O.prototype.delete=Wn,O.prototype.get=qn,O.prototype.has=Zn,O.prototype.set=Xn;var we=Cn(Object.getPrototypeOf,Object),Jn="[object Object]",Yn=Function.prototype,Qn=Object.prototype,Se=Yn.toString,kn=Qn.hasOwnProperty,er=Se.call(Object);function tr(e){if(!A(e)||x(e)!=Jn)return!1;var t=we(e);if(t===null)return!0;var n=kn.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Se.call(n)==er}function nr(){this.__data__=new b,this.size=0}function rr(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function or(e){return this.__data__.get(e)}function ar(e){return this.__data__.has(e)}var ir=200;function sr(e,t){var n=this.__data__;if(n instanceof b){var r=n.__data__;if(!Oe||r.length<ir-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new O(r)}return n.set(e,t),this.size=n.size,this}function w(e){var t=this.__data__=new b(e);this.size=t.size}w.prototype.clear=nr,w.prototype.delete=rr,w.prototype.get=or,w.prototype.has=ar,w.prototype.set=sr;var Ae=typeof u=="object"&&u&&!u.nodeType&&u,$e=Ae&&typeof module=="object"&&module&&!module.nodeType&&module,cr=$e&&$e.exports===Ae,Ie=cr?j.Buffer:void 0;Ie&&Ie.allocUnsafe;function ur(e,t){return e.slice()}var Ee=j.Uint8Array;function lr(e){var t=new e.constructor(e.byteLength);return new Ee(t).set(new Ee(e)),t}function fr(e,t){var n=lr(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function dr(e){return typeof e.constructor=="function"&&!pe(e)?gt(we(e)):{}}function pr(e){return function(t,n,r){for(var o=-1,a=Object(t),c=r(t),i=c.length;i--;){var l=c[++o];if(n(a[l],l,a)===!1)break}return t}}var hr=pr();function Y(e,t,n){(n!==void 0&&!V(e[t],n)||n===void 0&&!(t in e))&&q(e,t,n)}function mr(e){return A(e)&&Z(e)}function Q(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function yr(e){return Dt(e,je(e))}function gr(e,t,n,r,o,a,c){var i=Q(e,n),l=Q(t,n),d=c.get(l);if(d){Y(e,n,d);return}var p=a?a(i,l,n+"",e,t,c):void 0,g=p===void 0;if(g){var _=K(l),R=!_&&be(l),ee=!_&&!R&&Pe(l);p=l,_||R||ee?K(i)?p=i:mr(i)?p=bt(i):R?(g=!1,p=ur(l)):ee?(g=!1,p=fr(l)):p=[]:tr(l)||X(l)?(p=i,X(i)?p=yr(i):(!T(i)||G(i))&&(p=dr(l))):g=!1}g&&(c.set(l,p),o(p,l,r,a,c),c.delete(l)),Y(e,n,p)}function De(e,t,n,r,o){e!==t&&hr(t,function(a,c){if(o||(o=new w),T(a))gr(e,t,c,n,De,r,o);else{var i=r?r(Q(e,c),a,c+"",e,t,o):void 0;i===void 0&&(i=a),Y(e,c,i)}},je)}var Me=Bt(function(e,t,n){De(e,t,n)});let xe;const vr=e=>{xe=e},br={overlay:!0,round:!0,lockScroll:!0,closeable:!0,closeOnClickOverlay:!1,style:{backgroundColor:"#fff",color:"#000"}},k=(e=!0)=>{const t=s.getCurrentInstance();return(r,o={})=>{const a=s.ref(e),c=H(t,s.h(s.defineComponent({setup(){const i=s.ref(),l=()=>{c.destroy()},d=()=>{c.emit(v.destory)},p=()=>{Promise.resolve().then(()=>{c.componentRef=i})};return()=>s.createVNode(Be.Popup,s.mergeProps({ref:i,show:a.value,onClickCloseIcon:l,onClosed:d,onVnodeMounted:p},{...br,...o.attrs}),{default:()=>r,...o.slots})}})),{provideProps:o.provideProps||{},appendTo:xe||o.appendTo,visible:a});return c}},_r=(e=!0)=>{const t=k(e);return(n,r={})=>(Me(r,{attrs:{position:"bottom",style:{width:"100vw"}}}),t(n,r))},Ne=(e=!0)=>{const t=k(e);return(n,r={})=>{const o=s.createVNode("div",{class:"w-full h-full"},[r.title&&s.createVNode("div",{class:"vant-popup-title"},[s.createVNode("div",{class:"vant-popup-title-text",innerHTML:r.title},null)]),n]);return t(o,r)}},Cr=(e=!0)=>{const t=Ne(e);return(n,r={})=>(Me(r,{attrs:{position:"bottom",style:{width:"100vw"}}}),t(n,r))};u.CommandDialogConsumerInjectKey=z,u.CommandDialogProvider=H,u.CommandDialogStackInjectKey=F,u.EVENT_NAME=v,u.createElementPlusDialog=Ge,u.createVantUiPopup=k,u.createVantUiPopupOnBottom=_r,u.createVantUiTitlePopup=Ne,u.createVantUiTitlePopupOnBottom=Cr,u.getCommandDialogConsumer=He,u.setElementPlusDialogMountNode=Ke,u.setVantUiPopupMountNode=vr,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
