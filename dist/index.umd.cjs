(function(u,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue"),require("element-plus"),require("vant")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus","vant"],s):(u=typeof globalThis<"u"?globalThis:u||self,s(u.Vue3CommandDialog={},u.Vue,u.ElementPlus,u.Vant))})(this,function(u,s,v,Fe){"use strict";var Or=Object.defineProperty;var Sr=(u,s,v)=>s in u?Or(u,s,{enumerable:!0,configurable:!0,writable:!0,value:v}):u[s]=v;var Ue=(u,s,v)=>Sr(u,typeof s!="symbol"?s+"":s,v);class te{constructor(){Ue(this,"map",new WeakMap)}getEventsMapByConsumer(t){let n=this.map.get(t);return n||(n=new Map,this.map.set(t,n)),n}getEventsByConsumer(t,n){const r=this.getEventsMapByConsumer(t);let o=r.get(n);return o||(o=new Set,r.set(n,o)),o}on(t,n,r,o={}){const a=this.getEventsByConsumer(t,n);let c=r;o.once&&(c=(...i)=>{r(...i),this.off(t,n,c)}),a.add(c),o.callAfterDelay!==void 0&&setTimeout(()=>{c()},o.callAfterDelay||0)}once(t,n,r){this.on(t,n,r,{once:!0})}emit(t,n,...r){this.getEventsByConsumer(t,n).forEach(a=>a(...r))}off(t,n,r){this.getEventsByConsumer(t,n).delete(r)}}const ne=(e="")=>e.slice(2).toLowerCase(),F=(e="")=>`on${e.charAt(0).toUpperCase()}${e.slice(1)}`,re=()=>{let e=()=>{},t=()=>{};return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}},oe=e=>{var r;const t=((r=e.parentElement)==null?void 0:r.children)||[];let n=0;return Array.from(t).forEach(o=>{if(o!==e){const a=parseInt(window.getComputedStyle(o).zIndex);!isNaN(a)&&a>n&&(n=a)}}),n};var b=(e=>(e.confirm="confirm",e.cancel="cancel",e.destory="destory",e))(b||{});const K=Symbol("CommandDialogConsumerInjectKey"),G=Symbol("CommandDialogStackInjectKey"),D=new te,ae=e=>({...e.parent?ae(e.parent):{},...e.provides});function M(e,t,n){const r=(typeof n.appendTo=="string"?document.querySelector(n.appendTo):n.appendTo)||document.body,o=document.createElement("div");o.className="command-commponent-container",r.appendChild(o);const a=oe(o);o.style.position="relative",o.style.zIndex=String(Math.max(a+1,9999));const c=()=>{n.visible.value=!1},i=()=>{n.visible.value=!0},l=()=>{s.nextTick(()=>{s.render(null,o),o.remove()})},f=(h=!1)=>{h?(g.on(b.destory,l,{once:!0,callAfterDelay:3e3}),c()):g.stack.splice(g.stackIndex).forEach(y=>y.destroy(!0))},{promise:p,resolve:m,reject:C}=re(),g={promise:p,resolve:m,reject:C,destroyWithResolve:h=>{m(h),f()},destroyWithReject:h=>{C(h),f()},hide:c,show:i,destroy:f,container:o,visible:n.visible,on:(h,y,wr={})=>D.on(g,h,y,wr),once:(h,y)=>D.once(g,h,y),emit:(h,...y)=>D.emit(g,h,...y),off:(h,y)=>D.off(g,h,y),stack:[],stackIndex:-1,componentRef:void 0},jr=s.defineComponent({setup(){for(const y in n.provideProps)s.provide(y,n.provideProps[y]);s.provide(K,g);const h=s.inject(G,[]);return g.stackIndex=h.length,h.push(g),s.provide(G,h),g.stack=h,()=>t}}),$=s.createVNode(jr,null,null);return $.appContext=(e==null?void 0:e.appContext)||$.appContext,$.appContext.provides={...$.appContext.provides,...ae(e)},s.render($,o),g}const ie=(e=!0)=>{const t=()=>e&&console.warn(`别调用了欧尼酱~,这会儿没啥实际用途;没有根据CommandDialogInjectKey接收到注入数据.原因可能有两个:
    1.你可能对getConsumer进行了异步调用或条件调用,请在setup中直接调用.
    2.你没有在命令弹窗内展示该组件,这个时候你一般可以忽略该警告消息.`);return s.inject(K,()=>new Proxy({},{get:()=>t,apply:t}),!0)},Ke=(...e)=>(console.warn("Warning: This API will be deprecated in the future, please use `getConsumer` instead."),ie(...e));let se;const Ge=e=>{se=e},He=(e=!0)=>{const t=s.getCurrentInstance(),{locale:{t:n}}=v.useGlobalComponentSettings("message-box");return(o,a={})=>{const c=s.ref(e),i=M(t,s.h(s.defineComponent({setup(){const l=s.ref(),f=C=>{C(),i.destroy()},p=()=>{i.emit(b.destory)},m=()=>{Promise.resolve().then(()=>{i.componentRef=l})};return()=>s.createVNode(v.ElDialog,s.mergeProps({ref:l,modelValue:c.value,beforeClose:f,onClosed:p,onVnodeMounted:m},{title:a.title,width:a.width,...a.attrs}),{default:()=>o,footer:()=>s.createVNode("div",null,[a[F(b.cancel)]&&s.createVNode(v.ElButton,{onClick:()=>i.emit(b.cancel)},{default:()=>[a.cancelBtnText||n("el.messagebox.cancel")]}),a[F(b.confirm)]&&s.createVNode(v.ElButton,{type:"primary",onClick:()=>i.emit(b.confirm)},{default:()=>[a.confirmBtnText||n("el.messagebox.confirm")]})]),...a.slots})}})),{provideProps:a.provideProps||{},appendTo:se||a.appendTo,visible:c});return Object.entries(a).filter(([l,f])=>l.startsWith("on")&&typeof f=="function").forEach(([l,f])=>{const p=ne(l);i.on(p,f)}),i}};let ce;const We=e=>{ce=e},Le=(e=!0)=>{const t=s.getCurrentInstance();return(r,o={})=>{const a=s.ref(e),c=M(t,s.h(s.defineComponent({setup(){const i=s.ref(),l=m=>{m(),c.destroy()},f=()=>{c.emit(b.destory)},p=()=>{Promise.resolve().then(()=>{c.componentRef=i})};return()=>s.createVNode(v.ElDrawer,s.mergeProps({ref:i,modelValue:a.value,beforeClose:l,onClosed:f,onVnodeMounted:p},{title:o.title,width:o.width,...o.attrs}),{default:()=>r,...o.slots})}})),{provideProps:o.provideProps||{},appendTo:ce||o.appendTo,visible:a});return c}};var ue=typeof global=="object"&&global&&global.Object===Object&&global,qe=typeof self=="object"&&self&&self.Object===Object&&self,j=ue||qe||Function("return this")(),N=j.Symbol,le=Object.prototype,Ze=le.hasOwnProperty,Xe=le.toString,S=N?N.toStringTag:void 0;function Je(e){var t=Ze.call(e,S),n=e[S];try{e[S]=void 0;var r=!0}catch{}var o=Xe.call(e);return r&&(t?e[S]=n:delete e[S]),o}var Ye=Object.prototype,Qe=Ye.toString;function ke(e){return Qe.call(e)}var et="[object Null]",tt="[object Undefined]",de=N?N.toStringTag:void 0;function x(e){return e==null?e===void 0?tt:et:de&&de in Object(e)?Je(e):ke(e)}function E(e){return e!=null&&typeof e=="object"}var H=Array.isArray;function T(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function fe(e){return e}var nt="[object AsyncFunction]",rt="[object Function]",ot="[object GeneratorFunction]",at="[object Proxy]";function W(e){if(!T(e))return!1;var t=x(e);return t==rt||t==ot||t==nt||t==at}var L=j["__core-js_shared__"],pe=function(){var e=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function it(e){return!!pe&&pe in e}var st=Function.prototype,ct=st.toString;function ut(e){if(e!=null){try{return ct.call(e)}catch{}try{return e+""}catch{}}return""}var lt=/[\\^$.*+?()[\]{}|]/g,dt=/^\[object .+?Constructor\]$/,ft=Function.prototype,pt=Object.prototype,ht=ft.toString,mt=pt.hasOwnProperty,gt=RegExp("^"+ht.call(mt).replace(lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yt(e){if(!T(e)||it(e))return!1;var t=W(e)?gt:dt;return t.test(ut(e))}function vt(e,t){return e==null?void 0:e[t]}function q(e,t){var n=vt(e,t);return yt(n)?n:void 0}var he=Object.create,bt=function(){function e(){}return function(t){if(!T(t))return{};if(he)return he(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function _t(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ct(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Tt=800,Pt=16,jt=Date.now;function wt(e){var t=0,n=0;return function(){var r=jt(),o=Pt-(r-n);if(n=r,o>0){if(++t>=Tt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Ot(e){return function(){return e}}var B=function(){try{var e=q(Object,"defineProperty");return e({},"",{}),e}catch{}}(),St=B?function(e,t){return B(e,"toString",{configurable:!0,enumerable:!1,value:Ot(t),writable:!0})}:fe,Et=wt(St),At=9007199254740991,It=/^(?:0|[1-9]\d*)$/;function me(e,t){var n=typeof e;return t=t??At,!!t&&(n=="number"||n!="symbol"&&It.test(e))&&e>-1&&e%1==0&&e<t}function Z(e,t,n){t=="__proto__"&&B?B(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function R(e,t){return e===t||e!==e&&t!==t}var $t=Object.prototype,Dt=$t.hasOwnProperty;function Mt(e,t,n){var r=e[t];(!(Dt.call(e,t)&&R(r,n))||n===void 0&&!(t in e))&&Z(e,t,n)}function Nt(e,t,n,r){var o=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var i=t[a],l=void 0;l===void 0&&(l=e[i]),o?Z(n,i,l):Mt(n,i,l)}return n}var ge=Math.max;function xt(e,t,n){return t=ge(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=ge(r.length-t,0),c=Array(a);++o<a;)c[o]=r[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=r[o];return i[t]=n(c),_t(e,this,i)}}function Bt(e,t){return Et(xt(e,t,fe),e+"")}var Rt=9007199254740991;function ye(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Rt}function X(e){return e!=null&&ye(e.length)&&!W(e)}function Vt(e,t,n){if(!T(n))return!1;var r=typeof t;return(r=="number"?X(n)&&me(t,n.length):r=="string"&&t in n)?R(n[t],e):!1}function zt(e){return Bt(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,c=o>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,c&&Vt(n[0],n[1],c)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var i=n[r];i&&e(t,i,r,a)}return t})}var Ut=Object.prototype;function ve(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Ut;return e===n}function Ft(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Kt="[object Arguments]";function be(e){return E(e)&&x(e)==Kt}var _e=Object.prototype,Gt=_e.hasOwnProperty,Ht=_e.propertyIsEnumerable,J=be(function(){return arguments}())?be:function(e){return E(e)&&Gt.call(e,"callee")&&!Ht.call(e,"callee")};function Wt(){return!1}var Ce=typeof u=="object"&&u&&!u.nodeType&&u,Te=Ce&&typeof module=="object"&&module&&!module.nodeType&&module,Lt=Te&&Te.exports===Ce,Pe=Lt?j.Buffer:void 0,qt=Pe?Pe.isBuffer:void 0,je=qt||Wt,Zt="[object Arguments]",Xt="[object Array]",Jt="[object Boolean]",Yt="[object Date]",Qt="[object Error]",kt="[object Function]",en="[object Map]",tn="[object Number]",nn="[object Object]",rn="[object RegExp]",on="[object Set]",an="[object String]",sn="[object WeakMap]",cn="[object ArrayBuffer]",un="[object DataView]",ln="[object Float32Array]",dn="[object Float64Array]",fn="[object Int8Array]",pn="[object Int16Array]",hn="[object Int32Array]",mn="[object Uint8Array]",gn="[object Uint8ClampedArray]",yn="[object Uint16Array]",vn="[object Uint32Array]",d={};d[ln]=d[dn]=d[fn]=d[pn]=d[hn]=d[mn]=d[gn]=d[yn]=d[vn]=!0,d[Zt]=d[Xt]=d[cn]=d[Jt]=d[un]=d[Yt]=d[Qt]=d[kt]=d[en]=d[tn]=d[nn]=d[rn]=d[on]=d[an]=d[sn]=!1;function bn(e){return E(e)&&ye(e.length)&&!!d[x(e)]}function _n(e){return function(t){return e(t)}}var we=typeof u=="object"&&u&&!u.nodeType&&u,A=we&&typeof module=="object"&&module&&!module.nodeType&&module,Cn=A&&A.exports===we,Y=Cn&&ue.process,Oe=function(){try{var e=A&&A.require&&A.require("util").types;return e||Y&&Y.binding&&Y.binding("util")}catch{}}(),Se=Oe&&Oe.isTypedArray,Ee=Se?_n(Se):bn;function Tn(e,t){var n=H(e),r=!n&&J(e),o=!n&&!r&&je(e),a=!n&&!r&&!o&&Ee(e),c=n||r||o||a,i=c?Ft(e.length,String):[],l=i.length;for(var f in e)c&&(f=="length"||o&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||me(f,l))||i.push(f);return i}function Pn(e,t){return function(n){return e(t(n))}}function jn(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var wn=Object.prototype,On=wn.hasOwnProperty;function Sn(e){if(!T(e))return jn(e);var t=ve(e),n=[];for(var r in e)r=="constructor"&&(t||!On.call(e,r))||n.push(r);return n}function Ae(e){return X(e)?Tn(e):Sn(e)}var I=q(Object,"create");function En(){this.__data__=I?I(null):{},this.size=0}function An(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var In="__lodash_hash_undefined__",$n=Object.prototype,Dn=$n.hasOwnProperty;function Mn(e){var t=this.__data__;if(I){var n=t[e];return n===In?void 0:n}return Dn.call(t,e)?t[e]:void 0}var Nn=Object.prototype,xn=Nn.hasOwnProperty;function Bn(e){var t=this.__data__;return I?t[e]!==void 0:xn.call(t,e)}var Rn="__lodash_hash_undefined__";function Vn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=I&&t===void 0?Rn:t,this}function P(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}P.prototype.clear=En,P.prototype.delete=An,P.prototype.get=Mn,P.prototype.has=Bn,P.prototype.set=Vn;function zn(){this.__data__=[],this.size=0}function V(e,t){for(var n=e.length;n--;)if(R(e[n][0],t))return n;return-1}var Un=Array.prototype,Fn=Un.splice;function Kn(e){var t=this.__data__,n=V(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Fn.call(t,n,1),--this.size,!0}function Gn(e){var t=this.__data__,n=V(t,e);return n<0?void 0:t[n][1]}function Hn(e){return V(this.__data__,e)>-1}function Wn(e,t){var n=this.__data__,r=V(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function _(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_.prototype.clear=zn,_.prototype.delete=Kn,_.prototype.get=Gn,_.prototype.has=Hn,_.prototype.set=Wn;var Ie=q(j,"Map");function Ln(){this.size=0,this.__data__={hash:new P,map:new(Ie||_),string:new P}}function qn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function z(e,t){var n=e.__data__;return qn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Zn(e){var t=z(this,e).delete(e);return this.size-=t?1:0,t}function Xn(e){return z(this,e).get(e)}function Jn(e){return z(this,e).has(e)}function Yn(e,t){var n=z(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function w(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}w.prototype.clear=Ln,w.prototype.delete=Zn,w.prototype.get=Xn,w.prototype.has=Jn,w.prototype.set=Yn;var $e=Pn(Object.getPrototypeOf,Object),Qn="[object Object]",kn=Function.prototype,er=Object.prototype,De=kn.toString,tr=er.hasOwnProperty,nr=De.call(Object);function rr(e){if(!E(e)||x(e)!=Qn)return!1;var t=$e(e);if(t===null)return!0;var n=tr.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&De.call(n)==nr}function or(){this.__data__=new _,this.size=0}function ar(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function ir(e){return this.__data__.get(e)}function sr(e){return this.__data__.has(e)}var cr=200;function ur(e,t){var n=this.__data__;if(n instanceof _){var r=n.__data__;if(!Ie||r.length<cr-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new w(r)}return n.set(e,t),this.size=n.size,this}function O(e){var t=this.__data__=new _(e);this.size=t.size}O.prototype.clear=or,O.prototype.delete=ar,O.prototype.get=ir,O.prototype.has=sr,O.prototype.set=ur;var Me=typeof u=="object"&&u&&!u.nodeType&&u,Ne=Me&&typeof module=="object"&&module&&!module.nodeType&&module,lr=Ne&&Ne.exports===Me,xe=lr?j.Buffer:void 0;xe&&xe.allocUnsafe;function dr(e,t){return e.slice()}var Be=j.Uint8Array;function fr(e){var t=new e.constructor(e.byteLength);return new Be(t).set(new Be(e)),t}function pr(e,t){var n=fr(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function hr(e){return typeof e.constructor=="function"&&!ve(e)?bt($e(e)):{}}function mr(e){return function(t,n,r){for(var o=-1,a=Object(t),c=r(t),i=c.length;i--;){var l=c[++o];if(n(a[l],l,a)===!1)break}return t}}var gr=mr();function Q(e,t,n){(n!==void 0&&!R(e[t],n)||n===void 0&&!(t in e))&&Z(e,t,n)}function yr(e){return E(e)&&X(e)}function k(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function vr(e){return Nt(e,Ae(e))}function br(e,t,n,r,o,a,c){var i=k(e,n),l=k(t,n),f=c.get(l);if(f){Q(e,n,f);return}var p=a?a(i,l,n+"",e,t,c):void 0,m=p===void 0;if(m){var C=H(l),U=!C&&je(l),ee=!C&&!U&&Ee(l);p=l,C||U||ee?H(i)?p=i:yr(i)?p=Ct(i):U?(m=!1,p=dr(l)):ee?(m=!1,p=pr(l)):p=[]:rr(l)||J(l)?(p=i,J(i)?p=vr(i):(!T(i)||W(i))&&(p=hr(l))):m=!1}m&&(c.set(l,p),o(p,l,r,a,c),c.delete(l)),Q(e,n,p)}function Re(e,t,n,r,o){e!==t&&gr(t,function(a,c){if(o||(o=new O),T(a))br(e,t,c,n,Re,r,o);else{var i=r?r(k(e,c),a,c+"",e,t,o):void 0;i===void 0&&(i=a),Q(e,c,i)}},Ae)}var _r=zt(function(e,t,n){Re(e,t,n)});let Ve;const Cr=e=>{Ve=e},Tr={round:!0,lockScroll:!0,closeable:!0,style:{backgroundColor:"#fff",color:"#000"}},ze=(e=!0)=>{const t=s.getCurrentInstance();return(r,o={})=>{const a=s.ref(e),c=M(t,s.h(s.defineComponent({setup(){const i=s.ref(),l=()=>{c.destroy()},f=()=>{c.emit(b.destory)},p=()=>{Promise.resolve().then(()=>{c.componentRef=i})};return()=>s.createVNode(Fe.Popup,s.mergeProps({ref:i,show:a.value,onClickCloseIcon:l,onClosed:f,onVnodeMounted:p},{...Tr,...o.attrs}),{default:()=>r,...o.slots})}})),{provideProps:o.provideProps||{},appendTo:Ve||o.appendTo,visible:a});return c}},Pr=(e=!0)=>{const t=ze(e);return(n,r={})=>(_r(r,{attrs:{position:"bottom",style:{width:"100vw"}}}),t(n,r))};u.CommandDialogConsumerInjectKey=K,u.CommandDialogStackInjectKey=G,u.CommandProvider=M,u.ConsumerEventBus=te,u.EVENT_NAME=b,u.PromiseWithResolvers=re,u.busName2EventName=F,u.createElementPlusDialog=He,u.createElementPlusDrawer=Le,u.createVantUiPopup=ze,u.createVantUiPopupOnBottom=Pr,u.eventName2BusName=ne,u.getCommandDialogConsumer=Ke,u.getConsumer=ie,u.getMaxZIndex=oe,u.setElementPlusDialogMountNode=Ge,u.setElementPlusDrawerMountNode=We,u.setVantUiPopupMountNode=Cr,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
