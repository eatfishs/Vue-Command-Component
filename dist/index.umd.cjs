(function(s,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("vue"),require("element-plus"),require("vant")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus","vant"],c):(s=typeof globalThis<"u"?globalThis:s||self,c(s.Vue3CommandDialog={},s.Vue,s.ElementPlus,s.Vant))})(this,function(s,c,v,Ve){"use strict";var jr=Object.defineProperty;var Pr=(s,c,v)=>c in s?jr(s,c,{enumerable:!0,configurable:!0,writable:!0,value:v}):s[c]=v;var Ue=(s,c,v)=>Pr(s,typeof c!="symbol"?c+"":c,v);class te{constructor(){Ue(this,"map",new WeakMap)}getEventsMapByConsumer(t){let n=this.map.get(t);return n||(n=new Map,this.map.set(t,n)),n}getEventsByConsumer(t,n){const r=this.getEventsMapByConsumer(t);let o=r.get(n);return o||(o=new Set,r.set(n,o)),o}on(t,n,r,o={}){const a=this.getEventsByConsumer(t,n);let u=r;o.once&&(u=(...i)=>{r(...i),this.off(t,n,u)}),a.add(u),o.callAfterDelay!==void 0&&setTimeout(()=>{u()},o.callAfterDelay||0)}once(t,n,r){this.on(t,n,r,{once:!0})}emit(t,n,...r){this.getEventsByConsumer(t,n).forEach(a=>a(...r))}off(t,n,r){this.getEventsByConsumer(t,n).delete(r)}}const ne=(e="")=>e.slice(2).toLowerCase(),V=(e="")=>`on${e.charAt(0).toUpperCase()}${e.slice(1)}`,re=()=>{let e=()=>{},t=()=>{};return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}},oe=e=>{var r;const t=((r=e.parentElement)==null?void 0:r.children)||[];let n=0;return Array.from(t).forEach(o=>{if(o!==e){const a=parseInt(window.getComputedStyle(o).zIndex);!isNaN(a)&&a>n&&(n=a)}}),n};var b=(e=>(e.confirm="confirm",e.cancel="cancel",e.destory="destory",e))(b||{});const F=Symbol("CommandDialogConsumerInjectKey"),K=Symbol("CommandDialogStackInjectKey"),D=new te,ae=e=>({...e.parent?ae(e.parent):{},...e.provides});function G(e,t,n){const r=(typeof n.appendTo=="string"?document.querySelector(n.appendTo):n.appendTo)||document.body,o=document.createElement("div");o.className="command-commponent-container",r.appendChild(o);const a=oe(o);o.style.position="relative",o.style.zIndex=String(Math.max(a+1,9999));const u=()=>{n.visible.value=!1},i=()=>{n.visible.value=!0},l=()=>{c.nextTick(()=>{c.render(null,o),o.remove()})},d=(h=!1)=>{h?(m.on(b.destory,l,{once:!0,callAfterDelay:3e3}),u()):m.stack.splice(m.stackIndex).forEach(g=>g.destroy(!0))},{promise:p,resolve:y,reject:C}=re(),m={promise:p,resolve:y,reject:C,destroyWithResolve:h=>{y(h),d()},destroyWithReject:h=>{C(h),d()},hide:u,show:i,destroy:d,container:o,visible:n.visible,on:(h,g,Tr={})=>D.on(m,h,g,Tr),once:(h,g)=>D.once(m,h,g),emit:(h,...g)=>D.emit(m,h,...g),off:(h,g)=>D.off(m,h,g),stack:[],stackIndex:-1,componentRef:void 0},Cr=c.defineComponent({setup(){for(const g in n.provideProps)c.provide(g,n.provideProps[g]);c.provide(F,m);const h=c.inject(K,[]);return m.stackIndex=h.length,h.push(m),c.provide(K,h),m.stack=h,()=>t}}),$=c.createVNode(Cr,null,null);return $.appContext=(e==null?void 0:e.appContext)||$.appContext,$.appContext.provides={...$.appContext.provides,...ae(e)},c.render($,o),m}const ie=(e=!0)=>{const t=()=>e&&console.warn(`别调用了欧尼酱~,这会儿没啥实际用途;没有根据CommandDialogInjectKey接收到注入数据.原因可能有两个:
    1.你可能对getConsumer进行了异步调用或条件调用,请在setup中直接调用.
    2.你没有在命令弹窗内展示该组件,这个时候你一般可以忽略该警告消息.`);return c.inject(F,()=>new Proxy({},{get:()=>t,apply:t}),!0)},Fe=(...e)=>(console.warn("Warning: This API will be deprecated in the future, please use `getConsumer` instead."),ie(...e));let se;const Ke=e=>{se=e},Ge=(e=!0)=>{const t=c.getCurrentInstance(),{locale:{t:n}}=v.useGlobalComponentSettings("message-box");return(o,a={})=>{const u=c.ref(e),i=G(t,c.h(c.defineComponent({setup(){const l=c.ref(),d=C=>{C(),i.destroy()},p=()=>{i.emit(b.destory)},y=()=>{Promise.resolve().then(()=>{i.componentRef=l})};return()=>c.createVNode(v.ElDialog,c.mergeProps({ref:l,modelValue:u.value,beforeClose:d,onClosed:p,onVnodeMounted:y},{title:a.title,width:a.width,...a.attrs}),{default:()=>o,footer:()=>c.createVNode("div",null,[a[V(b.cancel)]&&c.createVNode(v.ElButton,{onClick:()=>i.emit(b.cancel)},{default:()=>[a.cancelBtnText||n("el.messagebox.cancel")]}),a[V(b.confirm)]&&c.createVNode(v.ElButton,{type:"primary",onClick:()=>i.emit(b.confirm)},{default:()=>[a.confirmBtnText||n("el.messagebox.confirm")]})]),...a.slots})}})),{provideProps:a.provideProps||{},appendTo:se||a.appendTo,visible:u});return Object.entries(a).filter(([l,d])=>l.startsWith("on")&&typeof d=="function").forEach(([l,d])=>{const p=ne(l);i.on(p,d)}),i}};var ue=typeof global=="object"&&global&&global.Object===Object&&global,He=typeof self=="object"&&self&&self.Object===Object&&self,P=ue||He||Function("return this")(),M=P.Symbol,ce=Object.prototype,We=ce.hasOwnProperty,Le=ce.toString,S=M?M.toStringTag:void 0;function qe(e){var t=We.call(e,S),n=e[S];try{e[S]=void 0;var r=!0}catch{}var o=Le.call(e);return r&&(t?e[S]=n:delete e[S]),o}var Ze=Object.prototype,Xe=Ze.toString;function Je(e){return Xe.call(e)}var Ye="[object Null]",Qe="[object Undefined]",le=M?M.toStringTag:void 0;function N(e){return e==null?e===void 0?Qe:Ye:le&&le in Object(e)?qe(e):Je(e)}function A(e){return e!=null&&typeof e=="object"}var H=Array.isArray;function T(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function fe(e){return e}var ke="[object AsyncFunction]",et="[object Function]",tt="[object GeneratorFunction]",nt="[object Proxy]";function W(e){if(!T(e))return!1;var t=N(e);return t==et||t==tt||t==ke||t==nt}var L=P["__core-js_shared__"],de=function(){var e=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function rt(e){return!!de&&de in e}var ot=Function.prototype,at=ot.toString;function it(e){if(e!=null){try{return at.call(e)}catch{}try{return e+""}catch{}}return""}var st=/[\\^$.*+?()[\]{}|]/g,ut=/^\[object .+?Constructor\]$/,ct=Function.prototype,lt=Object.prototype,ft=ct.toString,dt=lt.hasOwnProperty,pt=RegExp("^"+ft.call(dt).replace(st,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ht(e){if(!T(e)||rt(e))return!1;var t=W(e)?pt:ut;return t.test(it(e))}function mt(e,t){return e==null?void 0:e[t]}function q(e,t){var n=mt(e,t);return ht(n)?n:void 0}var pe=Object.create,gt=function(){function e(){}return function(t){if(!T(t))return{};if(pe)return pe(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function yt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function vt(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var bt=800,_t=16,Ct=Date.now;function Tt(e){var t=0,n=0;return function(){var r=Ct(),o=_t-(r-n);if(n=r,o>0){if(++t>=bt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function jt(e){return function(){return e}}var x=function(){try{var e=q(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Pt=x?function(e,t){return x(e,"toString",{configurable:!0,enumerable:!1,value:jt(t),writable:!0})}:fe,Ot=Tt(Pt),wt=9007199254740991,St=/^(?:0|[1-9]\d*)$/;function he(e,t){var n=typeof e;return t=t??wt,!!t&&(n=="number"||n!="symbol"&&St.test(e))&&e>-1&&e%1==0&&e<t}function Z(e,t,n){t=="__proto__"&&x?x(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function B(e,t){return e===t||e!==e&&t!==t}var At=Object.prototype,Et=At.hasOwnProperty;function It(e,t,n){var r=e[t];(!(Et.call(e,t)&&B(r,n))||n===void 0&&!(t in e))&&Z(e,t,n)}function $t(e,t,n,r){var o=!n;n||(n={});for(var a=-1,u=t.length;++a<u;){var i=t[a],l=void 0;l===void 0&&(l=e[i]),o?Z(n,i,l):It(n,i,l)}return n}var me=Math.max;function Dt(e,t,n){return t=me(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=me(r.length-t,0),u=Array(a);++o<a;)u[o]=r[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=r[o];return i[t]=n(u),yt(e,this,i)}}function Mt(e,t){return Ot(Dt(e,t,fe),e+"")}var Nt=9007199254740991;function ge(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Nt}function X(e){return e!=null&&ge(e.length)&&!W(e)}function xt(e,t,n){if(!T(n))return!1;var r=typeof t;return(r=="number"?X(n)&&he(t,n.length):r=="string"&&t in n)?B(n[t],e):!1}function Bt(e){return Mt(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,u=o>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,u&&xt(n[0],n[1],u)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var i=n[r];i&&e(t,i,r,a)}return t})}var Rt=Object.prototype;function ye(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Rt;return e===n}function zt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Ut="[object Arguments]";function ve(e){return A(e)&&N(e)==Ut}var be=Object.prototype,Vt=be.hasOwnProperty,Ft=be.propertyIsEnumerable,J=ve(function(){return arguments}())?ve:function(e){return A(e)&&Vt.call(e,"callee")&&!Ft.call(e,"callee")};function Kt(){return!1}var _e=typeof s=="object"&&s&&!s.nodeType&&s,Ce=_e&&typeof module=="object"&&module&&!module.nodeType&&module,Gt=Ce&&Ce.exports===_e,Te=Gt?P.Buffer:void 0,Ht=Te?Te.isBuffer:void 0,je=Ht||Kt,Wt="[object Arguments]",Lt="[object Array]",qt="[object Boolean]",Zt="[object Date]",Xt="[object Error]",Jt="[object Function]",Yt="[object Map]",Qt="[object Number]",kt="[object Object]",en="[object RegExp]",tn="[object Set]",nn="[object String]",rn="[object WeakMap]",on="[object ArrayBuffer]",an="[object DataView]",sn="[object Float32Array]",un="[object Float64Array]",cn="[object Int8Array]",ln="[object Int16Array]",fn="[object Int32Array]",dn="[object Uint8Array]",pn="[object Uint8ClampedArray]",hn="[object Uint16Array]",mn="[object Uint32Array]",f={};f[sn]=f[un]=f[cn]=f[ln]=f[fn]=f[dn]=f[pn]=f[hn]=f[mn]=!0,f[Wt]=f[Lt]=f[on]=f[qt]=f[an]=f[Zt]=f[Xt]=f[Jt]=f[Yt]=f[Qt]=f[kt]=f[en]=f[tn]=f[nn]=f[rn]=!1;function gn(e){return A(e)&&ge(e.length)&&!!f[N(e)]}function yn(e){return function(t){return e(t)}}var Pe=typeof s=="object"&&s&&!s.nodeType&&s,E=Pe&&typeof module=="object"&&module&&!module.nodeType&&module,vn=E&&E.exports===Pe,Y=vn&&ue.process,Oe=function(){try{var e=E&&E.require&&E.require("util").types;return e||Y&&Y.binding&&Y.binding("util")}catch{}}(),we=Oe&&Oe.isTypedArray,Se=we?yn(we):gn;function bn(e,t){var n=H(e),r=!n&&J(e),o=!n&&!r&&je(e),a=!n&&!r&&!o&&Se(e),u=n||r||o||a,i=u?zt(e.length,String):[],l=i.length;for(var d in e)u&&(d=="length"||o&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||he(d,l))||i.push(d);return i}function _n(e,t){return function(n){return e(t(n))}}function Cn(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Tn=Object.prototype,jn=Tn.hasOwnProperty;function Pn(e){if(!T(e))return Cn(e);var t=ye(e),n=[];for(var r in e)r=="constructor"&&(t||!jn.call(e,r))||n.push(r);return n}function Ae(e){return X(e)?bn(e):Pn(e)}var I=q(Object,"create");function On(){this.__data__=I?I(null):{},this.size=0}function wn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Sn="__lodash_hash_undefined__",An=Object.prototype,En=An.hasOwnProperty;function In(e){var t=this.__data__;if(I){var n=t[e];return n===Sn?void 0:n}return En.call(t,e)?t[e]:void 0}var $n=Object.prototype,Dn=$n.hasOwnProperty;function Mn(e){var t=this.__data__;return I?t[e]!==void 0:Dn.call(t,e)}var Nn="__lodash_hash_undefined__";function xn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=I&&t===void 0?Nn:t,this}function j(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}j.prototype.clear=On,j.prototype.delete=wn,j.prototype.get=In,j.prototype.has=Mn,j.prototype.set=xn;function Bn(){this.__data__=[],this.size=0}function R(e,t){for(var n=e.length;n--;)if(B(e[n][0],t))return n;return-1}var Rn=Array.prototype,zn=Rn.splice;function Un(e){var t=this.__data__,n=R(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():zn.call(t,n,1),--this.size,!0}function Vn(e){var t=this.__data__,n=R(t,e);return n<0?void 0:t[n][1]}function Fn(e){return R(this.__data__,e)>-1}function Kn(e,t){var n=this.__data__,r=R(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function _(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_.prototype.clear=Bn,_.prototype.delete=Un,_.prototype.get=Vn,_.prototype.has=Fn,_.prototype.set=Kn;var Ee=q(P,"Map");function Gn(){this.size=0,this.__data__={hash:new j,map:new(Ee||_),string:new j}}function Hn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function z(e,t){var n=e.__data__;return Hn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Wn(e){var t=z(this,e).delete(e);return this.size-=t?1:0,t}function Ln(e){return z(this,e).get(e)}function qn(e){return z(this,e).has(e)}function Zn(e,t){var n=z(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function O(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}O.prototype.clear=Gn,O.prototype.delete=Wn,O.prototype.get=Ln,O.prototype.has=qn,O.prototype.set=Zn;var Ie=_n(Object.getPrototypeOf,Object),Xn="[object Object]",Jn=Function.prototype,Yn=Object.prototype,$e=Jn.toString,Qn=Yn.hasOwnProperty,kn=$e.call(Object);function er(e){if(!A(e)||N(e)!=Xn)return!1;var t=Ie(e);if(t===null)return!0;var n=Qn.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&$e.call(n)==kn}function tr(){this.__data__=new _,this.size=0}function nr(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function rr(e){return this.__data__.get(e)}function or(e){return this.__data__.has(e)}var ar=200;function ir(e,t){var n=this.__data__;if(n instanceof _){var r=n.__data__;if(!Ee||r.length<ar-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new O(r)}return n.set(e,t),this.size=n.size,this}function w(e){var t=this.__data__=new _(e);this.size=t.size}w.prototype.clear=tr,w.prototype.delete=nr,w.prototype.get=rr,w.prototype.has=or,w.prototype.set=ir;var De=typeof s=="object"&&s&&!s.nodeType&&s,Me=De&&typeof module=="object"&&module&&!module.nodeType&&module,sr=Me&&Me.exports===De,Ne=sr?P.Buffer:void 0;Ne&&Ne.allocUnsafe;function ur(e,t){return e.slice()}var xe=P.Uint8Array;function cr(e){var t=new e.constructor(e.byteLength);return new xe(t).set(new xe(e)),t}function lr(e,t){var n=cr(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function fr(e){return typeof e.constructor=="function"&&!ye(e)?gt(Ie(e)):{}}function dr(e){return function(t,n,r){for(var o=-1,a=Object(t),u=r(t),i=u.length;i--;){var l=u[++o];if(n(a[l],l,a)===!1)break}return t}}var pr=dr();function Q(e,t,n){(n!==void 0&&!B(e[t],n)||n===void 0&&!(t in e))&&Z(e,t,n)}function hr(e){return A(e)&&X(e)}function k(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function mr(e){return $t(e,Ae(e))}function gr(e,t,n,r,o,a,u){var i=k(e,n),l=k(t,n),d=u.get(l);if(d){Q(e,n,d);return}var p=a?a(i,l,n+"",e,t,u):void 0,y=p===void 0;if(y){var C=H(l),U=!C&&je(l),ee=!C&&!U&&Se(l);p=l,C||U||ee?H(i)?p=i:hr(i)?p=vt(i):U?(y=!1,p=ur(l)):ee?(y=!1,p=lr(l)):p=[]:er(l)||J(l)?(p=i,J(i)?p=mr(i):(!T(i)||W(i))&&(p=fr(l))):y=!1}y&&(u.set(l,p),o(p,l,r,a,u),u.delete(l)),Q(e,n,p)}function Be(e,t,n,r,o){e!==t&&pr(t,function(a,u){if(o||(o=new w),T(a))gr(e,t,u,n,Be,r,o);else{var i=r?r(k(e,u),a,u+"",e,t,o):void 0;i===void 0&&(i=a),Q(e,u,i)}},Ae)}var yr=Bt(function(e,t,n){Be(e,t,n)});let Re;const vr=e=>{Re=e},br={round:!0,lockScroll:!0,closeable:!0,style:{backgroundColor:"#fff",color:"#000"}},ze=(e=!0)=>{const t=c.getCurrentInstance();return(r,o={})=>{const a=c.ref(e),u=G(t,c.h(c.defineComponent({setup(){const i=c.ref(),l=()=>{u.destroy()},d=()=>{u.emit(b.destory)},p=()=>{Promise.resolve().then(()=>{u.componentRef=i})};return()=>c.createVNode(Ve.Popup,c.mergeProps({ref:i,show:a.value,onClickCloseIcon:l,onClosed:d,onVnodeMounted:p},{...br,...o.attrs}),{default:()=>r,...o.slots})}})),{provideProps:o.provideProps||{},appendTo:Re||o.appendTo,visible:a});return u}},_r=(e=!0)=>{const t=ze(e);return(n,r={})=>(yr(r,{attrs:{position:"bottom",style:{width:"100vw"}}}),t(n,r))};s.CommandDialogConsumerInjectKey=F,s.CommandDialogStackInjectKey=K,s.CommandProvider=G,s.ConsumerEventBus=te,s.EVENT_NAME=b,s.PromiseWithResolvers=re,s.busName2EventName=V,s.createElementPlusDialog=Ge,s.createVantUiPopup=ze,s.createVantUiPopupOnBottom=_r,s.eventName2BusName=ne,s.getCommandDialogConsumer=Fe,s.getConsumer=ie,s.getMaxZIndex=oe,s.setElementPlusDialogMountNode=Ke,s.setVantUiPopupMountNode=vr,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
