"use strict";var ze=Object.defineProperty,Fe=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var Ue=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var G=(e,t,n)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t)=>{for(var n in t||(t={}))Ue.call(t,n)&&G(e,n,t[n]);if(oe)for(var n of oe(t))He.call(t,n)&&G(e,n,t[n]);return e},K=(e,t)=>Fe(e,Be(t));var ae=(e,t,n)=>G(e,typeof t!="symbol"?t+"":t,n);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const f=require("vue");var Q=(e=>(e.destroy="destroy",e))(Q||{});class ge{constructor(){ae(this,"map",new WeakMap)}getEventsMapByConsumer(t){let n=this.map.get(t);return n||(n=new Map,this.map.set(t,n)),n}getEventsByConsumer(t,n){const r=this.getEventsMapByConsumer(t);let o=r.get(n);return o||(o=new Set,r.set(n,o)),o}on(t,n,r,o={}){const a=this.getEventsByConsumer(t,n);let u=r;o.once&&(u=(...i)=>{r(...i),this.off(t,n,u)}),a.add(u),o.callImmediatelyAfterDelay!==void 0&&setTimeout(()=>{u()},o.callImmediatelyAfterDelay||0)}once(t,n,r,o={}){this.on(t,n,r,K(w({},o),{once:!0}))}emit(t,n,...r){this.getEventsByConsumer(t,n).forEach(a=>a(...r))}off(t,n,r){this.getEventsByConsumer(t,n).delete(r)}}const Ge=(e="")=>e.slice(2).toLowerCase(),Ke=(e="")=>`on${e.charAt(0).toUpperCase()}${e.slice(1)}`,me=()=>{let e=()=>{},t=()=>{};return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}},Le=e=>{var r;const t=((r=e.parentElement)==null?void 0:r.children)||[];let n=0;return Array.from(t).forEach(o=>{if(o!==e){const a=parseInt(window.getComputedStyle(o).zIndex);!isNaN(a)&&a>n&&(n=a)}}),+n},We=e=>e==null,Ve=e=>typeof e!="function"?e:f.h(f.defineComponent({render:()=>e()})),qe=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),k=Symbol("CommandComponentConsumerInjectKey"),V=Symbol("CommandComponentStackInjectKey"),R=new ge,q=new Set,be=e=>w(w({},e.parent?be(e.parent):{}),e.provides);function _e(e,t,n){var N;const r=(typeof n.appendTo=="string"?document.querySelector(n.appendTo):n.appendTo)||((N=e.vnode.el)==null?void 0:N.parentElement)||document.body,o=document.createElement("div");o.className=n.customClassName||"command-component-container";const a=()=>{if(l.destroyed)throw new Error("Consumer has been destroyed");n.visible.value=!1},u=()=>{if(l.destroyed)throw new Error("Consumer has been destroyed");n.visible.value=!0},i=()=>{f.nextTick(()=>{f.render(null,o),o.remove()})},{promise:s,resolve:h,reject:p}=me(),y=3e3,m=(d=!1)=>{d?(a(),l.once(Q.destroy,i,{once:!0,callImmediatelyAfterDelay:y})):(q.delete(l),l.stack.splice(l.stackIndex).forEach(g=>g.destroy(!0)),l.destroyed=!0)},_=d=>{h(d),m()},T=d=>{p(d),m()},l={meta:n.meta||{},promise:s,resolve:h,reject:p,destroyWithResolve:_,destroyWithReject:T,hide:a,show:u,destroy:m,container:o,visible:n.visible,on:(d,v,g={})=>R.on(l,d,v,g),once:(d,v,g={})=>R.on(l,d,v,g),emit:(d,...v)=>R.emit(l,d,...v),off:(d,v)=>R.off(l,d,v),stack:[],stackIndex:-1,componentRef:void 0,mounted:!1,destroyed:!1},S=f.defineComponent({setup(){for(const g in n.provideProps)f.provide(g,n.provideProps[g]);const d=w({},be(e));for(const g in d)f.provide(g,d[g]);f.provide(k,l);const v=f.inject(V,[]);return l.stackIndex=v.length,v.push(l),f.provide(V,v),l.stack=v,()=>f.h(t)}}),O=f.createVNode(S,null,null);return O.appContext=(e==null?void 0:e.appContext)||O.appContext,n.fragment?(Object.assign(o.style,{display:"none",position:"absolute",pointerEvents:"none"}),document.head.appendChild(o),f.render(f.h(f.Teleport,{to:r},O),o)):(r.appendChild(o),f.render(O,o)),l.mounted=!0,q.add(l),l}const Ze=(e=!0)=>{const t=()=>e&&console.warn(`Failed to get Consumer instance. Please note:
    1. This function needs to be called directly in the setup top level.
    2. Make sure to display this component inside a command dialog, or you can ignore this warning message by using warn parameter: useConsumer(false)`);return f.inject(k,()=>new Proxy({},{get:()=>t,apply:t}),!0)};var Te=typeof global=="object"&&global&&global.Object===Object&&global,Xe=typeof self=="object"&&self&&self.Object===Object&&self,$=Te||Xe||Function("return this")(),D=$.Symbol,Ce=Object.prototype,Je=Ce.hasOwnProperty,Ye=Ce.toString,E=D?D.toStringTag:void 0;function Qe(e){var t=Je.call(e,E),n=e[E];try{e[E]=void 0;var r=!0}catch(a){}var o=Ye.call(e);return r&&(t?e[E]=n:delete e[E]),o}var ke=Object.prototype,et=ke.toString;function tt(e){return et.call(e)}var nt="[object Null]",rt="[object Undefined]",ie=D?D.toStringTag:void 0;function F(e){return e==null?e===void 0?rt:nt:ie&&ie in Object(e)?Qe(e):tt(e)}function M(e){return e!=null&&typeof e=="object"}var Z=Array.isArray;function j(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function je(e){return e}var ot="[object AsyncFunction]",at="[object Function]",it="[object GeneratorFunction]",st="[object Proxy]";function ee(e){if(!j(e))return!1;var t=F(e);return t==at||t==it||t==ot||t==st}var L=$["__core-js_shared__"],se=function(){var e=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ut(e){return!!se&&se in e}var ct=Function.prototype,ft=ct.toString;function lt(e){if(e!=null){try{return ft.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var pt=/[\\^$.*+?()[\]{}|]/g,dt=/^\[object .+?Constructor\]$/,ht=Function.prototype,vt=Object.prototype,yt=ht.toString,gt=vt.hasOwnProperty,mt=RegExp("^"+yt.call(gt).replace(pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bt(e){if(!j(e)||ut(e))return!1;var t=ee(e)?mt:dt;return t.test(lt(e))}function _t(e,t){return e==null?void 0:e[t]}function te(e,t){var n=_t(e,t);return bt(n)?n:void 0}var ue=Object.create,Tt=function(){function e(){}return function(t){if(!j(t))return{};if(ue)return ue(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Ct(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function jt(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Ot=800,wt=16,Pt=Date.now;function At(e){var t=0,n=0;return function(){var r=Pt(),o=wt-(r-n);if(n=r,o>0){if(++t>=Ot)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function St(e){return function(){return e}}var z=function(){try{var e=te(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Et=z?function(e,t){return z(e,"toString",{configurable:!0,enumerable:!1,value:St(t),writable:!0})}:je,xt=At(Et),It=9007199254740991,$t=/^(?:0|[1-9]\d*)$/;function Oe(e,t){var n=typeof e;return t=t==null?It:t,!!t&&(n=="number"||n!="symbol"&&$t.test(e))&&e>-1&&e%1==0&&e<t}function ne(e,t,n){t=="__proto__"&&z?z(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function B(e,t){return e===t||e!==e&&t!==t}var Mt=Object.prototype,Nt=Mt.hasOwnProperty;function Rt(e,t,n){var r=e[t];(!(Nt.call(e,t)&&B(r,n))||n===void 0&&!(t in e))&&ne(e,t,n)}function Dt(e,t,n,r){var o=!n;n||(n={});for(var a=-1,u=t.length;++a<u;){var i=t[a],s=void 0;s===void 0&&(s=e[i]),o?ne(n,i,s):Rt(n,i,s)}return n}var ce=Math.max;function zt(e,t,n){return t=ce(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=ce(r.length-t,0),u=Array(a);++o<a;)u[o]=r[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=r[o];return i[t]=n(u),Ct(e,this,i)}}function Ft(e,t){return xt(zt(e,t,je),e+"")}var Bt=9007199254740991;function we(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Bt}function re(e){return e!=null&&we(e.length)&&!ee(e)}function Ut(e,t,n){if(!j(n))return!1;var r=typeof t;return(r=="number"?re(n)&&Oe(t,n.length):r=="string"&&t in n)?B(n[t],e):!1}function Ht(e){return Ft(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,u=o>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,u&&Ut(n[0],n[1],u)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var i=n[r];i&&e(t,i,r,a)}return t})}var Gt=Object.prototype;function Pe(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Gt;return e===n}function Kt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Lt="[object Arguments]";function fe(e){return M(e)&&F(e)==Lt}var Ae=Object.prototype,Wt=Ae.hasOwnProperty,Vt=Ae.propertyIsEnumerable,X=fe(function(){return arguments}())?fe:function(e){return M(e)&&Wt.call(e,"callee")&&!Vt.call(e,"callee")};function qt(){return!1}var Se=typeof exports=="object"&&exports&&!exports.nodeType&&exports,le=Se&&typeof module=="object"&&module&&!module.nodeType&&module,Zt=le&&le.exports===Se,pe=Zt?$.Buffer:void 0,Xt=pe?pe.isBuffer:void 0,Ee=Xt||qt,Jt="[object Arguments]",Yt="[object Array]",Qt="[object Boolean]",kt="[object Date]",en="[object Error]",tn="[object Function]",nn="[object Map]",rn="[object Number]",on="[object Object]",an="[object RegExp]",sn="[object Set]",un="[object String]",cn="[object WeakMap]",fn="[object ArrayBuffer]",ln="[object DataView]",pn="[object Float32Array]",dn="[object Float64Array]",hn="[object Int8Array]",vn="[object Int16Array]",yn="[object Int32Array]",gn="[object Uint8Array]",mn="[object Uint8ClampedArray]",bn="[object Uint16Array]",_n="[object Uint32Array]",c={};c[pn]=c[dn]=c[hn]=c[vn]=c[yn]=c[gn]=c[mn]=c[bn]=c[_n]=!0;c[Jt]=c[Yt]=c[fn]=c[Qt]=c[ln]=c[kt]=c[en]=c[tn]=c[nn]=c[rn]=c[on]=c[an]=c[sn]=c[un]=c[cn]=!1;function Tn(e){return M(e)&&we(e.length)&&!!c[F(e)]}function Cn(e){return function(t){return e(t)}}var xe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,x=xe&&typeof module=="object"&&module&&!module.nodeType&&module,jn=x&&x.exports===xe,W=jn&&Te.process,de=function(){try{var e=x&&x.require&&x.require("util").types;return e||W&&W.binding&&W.binding("util")}catch(t){}}(),he=de&&de.isTypedArray,Ie=he?Cn(he):Tn;function On(e,t){var n=Z(e),r=!n&&X(e),o=!n&&!r&&Ee(e),a=!n&&!r&&!o&&Ie(e),u=n||r||o||a,i=u?Kt(e.length,String):[],s=i.length;for(var h in e)u&&(h=="length"||o&&(h=="offset"||h=="parent")||a&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Oe(h,s))||i.push(h);return i}function wn(e,t){return function(n){return e(t(n))}}function Pn(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var An=Object.prototype,Sn=An.hasOwnProperty;function En(e){if(!j(e))return Pn(e);var t=Pe(e),n=[];for(var r in e)r=="constructor"&&(t||!Sn.call(e,r))||n.push(r);return n}function $e(e){return re(e)?On(e):En(e)}var I=te(Object,"create");function xn(){this.__data__=I?I(null):{},this.size=0}function In(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var $n="__lodash_hash_undefined__",Mn=Object.prototype,Nn=Mn.hasOwnProperty;function Rn(e){var t=this.__data__;if(I){var n=t[e];return n===$n?void 0:n}return Nn.call(t,e)?t[e]:void 0}var Dn=Object.prototype,zn=Dn.hasOwnProperty;function Fn(e){var t=this.__data__;return I?t[e]!==void 0:zn.call(t,e)}var Bn="__lodash_hash_undefined__";function Un(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=I&&t===void 0?Bn:t,this}function C(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}C.prototype.clear=xn;C.prototype.delete=In;C.prototype.get=Rn;C.prototype.has=Fn;C.prototype.set=Un;function Hn(){this.__data__=[],this.size=0}function U(e,t){for(var n=e.length;n--;)if(B(e[n][0],t))return n;return-1}var Gn=Array.prototype,Kn=Gn.splice;function Ln(e){var t=this.__data__,n=U(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Kn.call(t,n,1),--this.size,!0}function Wn(e){var t=this.__data__,n=U(t,e);return n<0?void 0:t[n][1]}function Vn(e){return U(this.__data__,e)>-1}function qn(e,t){var n=this.__data__,r=U(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function b(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}b.prototype.clear=Hn;b.prototype.delete=Ln;b.prototype.get=Wn;b.prototype.has=Vn;b.prototype.set=qn;var Me=te($,"Map");function Zn(){this.size=0,this.__data__={hash:new C,map:new(Me||b),string:new C}}function Xn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function H(e,t){var n=e.__data__;return Xn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Jn(e){var t=H(this,e).delete(e);return this.size-=t?1:0,t}function Yn(e){return H(this,e).get(e)}function Qn(e){return H(this,e).has(e)}function kn(e,t){var n=H(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function P(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}P.prototype.clear=Zn;P.prototype.delete=Jn;P.prototype.get=Yn;P.prototype.has=Qn;P.prototype.set=kn;var Ne=wn(Object.getPrototypeOf,Object),er="[object Object]",tr=Function.prototype,nr=Object.prototype,Re=tr.toString,rr=nr.hasOwnProperty,or=Re.call(Object);function ar(e){if(!M(e)||F(e)!=er)return!1;var t=Ne(e);if(t===null)return!0;var n=rr.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Re.call(n)==or}function ir(){this.__data__=new b,this.size=0}function sr(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function ur(e){return this.__data__.get(e)}function cr(e){return this.__data__.has(e)}var fr=200;function lr(e,t){var n=this.__data__;if(n instanceof b){var r=n.__data__;if(!Me||r.length<fr-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new P(r)}return n.set(e,t),this.size=n.size,this}function A(e){var t=this.__data__=new b(e);this.size=t.size}A.prototype.clear=ir;A.prototype.delete=sr;A.prototype.get=ur;A.prototype.has=cr;A.prototype.set=lr;var pr=typeof exports=="object"&&exports&&!exports.nodeType&&exports;pr&&typeof module=="object"&&module&&module.nodeType;function dr(e,t){return e.slice()}var ve=$.Uint8Array;function hr(e){var t=new e.constructor(e.byteLength);return new ve(t).set(new ve(e)),t}function vr(e,t){var n=hr(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function yr(e){return typeof e.constructor=="function"&&!Pe(e)?Tt(Ne(e)):{}}function gr(e){return function(t,n,r){for(var o=-1,a=Object(t),u=r(t),i=u.length;i--;){var s=u[++o];if(n(a[s],s,a)===!1)break}return t}}var mr=gr();function J(e,t,n){(n!==void 0&&!B(e[t],n)||n===void 0&&!(t in e))&&ne(e,t,n)}function br(e){return M(e)&&re(e)}function Y(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function _r(e){return Dt(e,$e(e))}function Tr(e,t,n,r,o,a,u){var i=Y(e,n),s=Y(t,n),h=u.get(s);if(h){J(e,n,h);return}var p=a?a(i,s,n+"",e,t,u):void 0,y=p===void 0;if(y){var m=Z(s),_=!m&&Ee(s),T=!m&&!_&&Ie(s);p=s,m||_||T?Z(i)?p=i:br(i)?p=jt(i):_?(y=!1,p=dr(s)):T?(y=!1,p=vr(s)):p=[]:ar(s)||X(s)?(p=i,X(i)?p=_r(i):(!j(i)||ee(i))&&(p=yr(s))):y=!1}y&&(u.set(s,p),o(p,s,r,a,u),u.delete(s)),J(e,n,p)}function De(e,t,n,r,o){e!==t&&mr(t,function(a,u){if(o||(o=new A),j(a))Tr(e,t,u,n,De,r,o);else{var i=r?r(Y(e,u),a,u+"",e,t,o):void 0;i===void 0&&(i=a),J(e,u,i)}},$e)}var ye=Ht(function(e,t,n){De(e,t,n)});function Cr(e){const{render:t,defaultConfig:n={},configTransformer:r}=e;return function(o){const a=f.getCurrentInstance();return function(i,s){var _;const h=f.computed(()=>{const T=typeof o=="function"?o():o,l=typeof s=="function"?s():s,S=ye({},n,T,l);return r?r(S):S}),p=f.ref((_=h.value.immediate)!=null?_:!0),y={value:null},m=f.defineComponent({setup:()=>{const T=f.computed(()=>{const N=typeof o=="function"?o():o,d=typeof s=="function"?s():s,v=ye({},n,N,d);return r?r(v):v}),l=f.ref(),O={componentRef:l,onMounted:()=>{Promise.resolve().then(()=>{y.value.componentRef=l})},config:T,consumer:y,visible:p};return()=>t(i,O)}});return y.value=_e(a,f.createVNode(m,null,null),K(w({},h.value),{visible:p})),y.value}}}exports.CommandComponentConsumerInjectKey=k;exports.CommandComponentStackInjectKey=V;exports.ConsumerEventBus=ge;exports.EVENT_NAME=Q;exports.PromiseWithResolvers=me;exports.RxRender=Ve;exports.activeConsumers=q;exports.busName2EventName=Ke;exports.commandProviderWithRender=_e;exports.createAdapter=Cr;exports.eventName2BusName=Ge;exports.getMaxZIndex=Le;exports.isNull=We;exports.useConsumer=Ze;exports.uuid=qe;
