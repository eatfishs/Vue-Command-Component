(function(r,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus"],e):(r=typeof globalThis<"u"?globalThis:r||self,e(r.Vue3CommandDialog={},r.Vue,r.ElementPlus))})(this,function(r,e,C){"use strict";var R=Object.defineProperty;var W=(r,e,C)=>e in r?R(r,e,{enumerable:!0,configurable:!0,writable:!0,value:C}):r[e]=C;var x=(r,e,C)=>W(r,typeof e!="symbol"?e+"":e,C);class B{constructor(){x(this,"map",new WeakMap)}getEventsMapByConsumer(s){let o=this.map.get(s);return o||(o=new Map,this.map.set(s,o)),o}getEventsByConsumer(s,o){const i=this.getEventsMapByConsumer(s);let t=i.get(o);return t||(t=new Set,i.set(o,t)),t}on(s,o,i){this.getEventsByConsumer(s,o).add(i)}once(s,o,i){const t=(...d)=>{i(...d),this.off(s,o,t)};this.on(s,o,t)}emit(s,o,...i){const t=this.getEventsByConsumer(s,o);t.size===0&&console.warn(`${s}未注册${String(o)}事件`),t.forEach(d=>d(...i))}off(s,o,i){this.getEventsByConsumer(s,o).delete(i)}}const E=(n="")=>n.slice(2).toLowerCase(),k=(n="")=>`on${n.charAt(0).toUpperCase()}${n.slice(1)}`,S=()=>{let n=()=>{},s=()=>{};return{promise:new Promise((i,t)=>{n=i,s=t}),resolve:n,reject:s}};var y=(n=>(n.confirm="confirm",n.cancel="cancel",n.destory="destory",n))(y||{});const b=Symbol("CommandDialogConsumerInjectKey"),j=Symbol("CommandDialogStackInjectKey"),v=new B,P=n=>({...n.parent?P(n.parent):{},...n.provides});function w(n,s,o){const i=(typeof o.appendTo=="string"?document.querySelector(o.appendTo):o.appendTo)||document.body,t=document.createElement("div");i.appendChild(t);const d=()=>{o.visible.value=!1},m=()=>{o.visible.value=!0},u=()=>{e.nextTick(()=>{e.render(null,t),t.remove()})},p=(a=!1)=>{a?(l.once(y.destory,u),d()):l.stack.splice(l.stackIndex).forEach(c=>c.destroy(!0))},{promise:f,resolve:g,reject:D}=S(),l={promise:f,resolve:g,reject:D,destroyWithResolve:a=>{g(a),p()},destroyWithReject:a=>{D(a),p()},hide:d,show:m,destroy:p,container:t,on:(a,c)=>v.on(l,a,c),once:(a,c)=>v.once(l,a,c),emit:(a,...c)=>v.emit(l,a,...c),off:(a,c)=>v.off(l,a,c),stack:[],stackIndex:-1,componentRef:void 0},M=e.defineComponent({setup(){for(const c in o.provideProps)e.provide(c,o.provideProps[c]);e.provide(b,l);const a=e.inject(j,[]);return l.stackIndex=a.length,a.push(l),e.provide(j,a),l.stack=a,()=>s}}),h=e.createVNode(M,null,null);return h.appContext=(n==null?void 0:n.appContext)||h.appContext,h.appContext.provides={...h.appContext.provides,...P(n)},e.render(h,t),l}const T=(n=!0)=>{const s=()=>n&&console.warn(`别调用了欧尼酱~,这会儿没啥实际用途;没有根据CommandDialogInjectKey接收到注入数据.原因可能有两个:
    1.你可能对getCommandDialogConsumer进行了异步调用或条件调用,请在setup中直接调用.
    2.你没有在命令弹窗内展示该组件,这个时候你一般可以忽略该警告消息.`);return e.inject(b,new Proxy({},{get:()=>s,apply:s}))},K=()=>{const n=e.getCurrentInstance(),{locale:{t:s}}=C.useGlobalComponentSettings("message-box");return(i,t={})=>{const d=e.ref(!0),m=w(n,e.h(e.defineComponent({setup(){const u=e.ref(),p=D=>{D(),m.destroy()},f=()=>{m.emit(y.destory)},g=()=>{Promise.resolve().then(()=>{m.componentRef=u})};return()=>e.createVNode(C.ElDialog,e.mergeProps({ref:u,modelValue:d.value,beforeClose:p,onClosed:f,onVnodeMounted:g},{title:t.title,width:t.width,...t.attrs}),{default:()=>i,footer:()=>e.createVNode("div",null,[t[k(y.cancel)]&&e.createVNode(e.resolveComponent("el-button"),{onClick:()=>m.emit(y.cancel)},{default:()=>[t.onCancelBtnText||s("el.messagebox.cancel")]}),t[k(y.confirm)]&&e.createVNode(e.resolveComponent("el-button"),{type:"primary",onClick:()=>m.emit(y.confirm)},{default:()=>[t.onConfirmBtnText||s("el.messagebox.confirm")]})]),...t.slots})}})),{provideProps:t.provideProps||{},appendTo:t.appendTo,visible:d});return Object.entries(t).filter(([u,p])=>u.startsWith("on")&&typeof p=="function").forEach(([u,p])=>{const f=E(u);m.on(f,p)}),m}};r.CommandDialogConsumerInjectKey=b,r.CommandDialogProvider=w,r.CommandDialogStackInjectKey=j,r.createElementPlusDialog=K,r.getCommandDialogConsumer=T,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
