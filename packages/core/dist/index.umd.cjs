(function(i,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("vue"),require("element-plus"),require("vant"),require("vue-router")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus","vant","vue-router"],c):(i=typeof globalThis<"u"?globalThis:i||self,c(i.Vue3CommandDialog={},i.vue,i.elementPlus,i.vant,i.vueRouter))})(this,function(i,c,C,He,Ge){"use strict";var Ir=Object.defineProperty;var Mr=(i,c,C)=>c in i?Ir(i,c,{enumerable:!0,configurable:!0,writable:!0,value:C}):i[c]=C;var H=(i,c,C)=>Mr(i,typeof c!="symbol"?c+"":c,C);var E=(e=>(e.destroy="destroy",e))(E||{});class re{constructor(){H(this,"map",new WeakMap)}getEventsMapByConsumer(t){let n=this.map.get(t);return n||(n=new Map,this.map.set(t,n)),n}getEventsByConsumer(t,n){const r=this.getEventsMapByConsumer(t);let o=r.get(n);return o||(o=new Set,r.set(n,o)),o}on(t,n,r,o={}){const s=this.getEventsByConsumer(t,n);let a=r;o.once&&(a=(...u)=>{r(...u),this.off(t,n,a)}),s.add(a),o.callImmediatelyAfterDelay!==void 0&&setTimeout(()=>{a()},o.callImmediatelyAfterDelay||0)}once(t,n,r){this.on(t,n,r,{once:!0})}emit(t,n,...r){this.getEventsByConsumer(t,n).forEach(s=>s(...r))}off(t,n,r){this.getEventsByConsumer(t,n).delete(r)}}const Ke=(e="")=>e.slice(2).toLowerCase(),Le=(e="")=>`on${e.charAt(0).toUpperCase()}${e.slice(1)}`,oe=()=>{let e=()=>{},t=()=>{};return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}},We=e=>{var r;const t=((r=e.parentElement)==null?void 0:r.children)||[];let n=0;return Array.from(t).forEach(o=>{if(o!==e){const s=parseInt(window.getComputedStyle(o).zIndex);!isNaN(s)&&s>n&&(n=s)}}),+n},ae=e=>e==null,se=(e,t,...n)=>{const r={...e},o=s=>{for(const a in s)if(s[a]&&typeof s[a]=="object"){const u=r[a]&&typeof r[a]=="object"?r[a]:{};r[a]=se(u,s[a])}else r[a]=s[a]};return o(t),n.forEach(o),r},G=Symbol("CommandComponentConsumerInjectKey"),K=Symbol("CommandComponentStackInjectKey"),N=new re,R=new Set,ie=()=>{R.forEach(e=>{e.destroy()})},ue=e=>({...e.parent?ue(e.parent):{},...e.provides});function ce(e,t,n){var Ve;const r=(typeof n.appendTo=="string"?document.querySelector(n.appendTo):n.appendTo)||((Ve=e.vnode.el)==null?void 0:Ve.parentElement)||document.body,o=document.createElement("div");o.className=n.customClassName||"command-component-container",r.appendChild(o);const s=()=>{if(h.destroyed)throw new Error("Consumer has been destroyed");n.visible.value=!1},a=()=>{if(h.destroyed)throw new Error("Consumer has been destroyed");n.visible.value=!0},u=()=>{c.nextTick(()=>{c.render(null,o),o.remove()})},{promise:l,resolve:p,reject:d}=oe(),m=3e3,v=(y=!1)=>{y?(s(),h.on(E.destroy,u,{once:!0,callImmediatelyAfterDelay:m})):(R.delete(h),h.stack.splice(h.stackIndex).forEach(_=>_.destroy(!0)),h.destroyed=!0)},$=y=>{p(y),v()},V=y=>{d(y),v()},h={meta:n.meta||{},promise:l,resolve:p,reject:d,destroyWithResolve:$,destroyWithReject:V,hide:s,show:a,destroy:v,container:o,visible:n.visible,on:(y,g,_={})=>N.on(h,y,g,_),once:(y,g)=>N.once(h,y,g),emit:(y,...g)=>N.emit(h,y,...g),off:(y,g)=>N.off(h,y,g),stack:[],stackIndex:-1,componentRef:void 0,mounted:!1,destroyed:!1},Sr=c.defineComponent({setup(){for(const _ in n.provideProps)c.provide(_,n.provideProps[_]);const y={...ue(e)};for(const _ in y)c.provide(_,y[_]);c.provide(G,h);const g=c.inject(K,[]);return h.stackIndex=g.length,g.push(h),c.provide(K,g),h.stack=g,()=>c.h(t)}}),ne=c.createVNode(Sr,null,null);return ne.appContext=(e==null?void 0:e.appContext)||ne.appContext,c.render(ne,o),h.mounted=!0,R.add(h),h}const qe=(e=!0)=>{const t=()=>e&&console.warn(`Failed to get Consumer instance. Please note:
    1. This function needs to be called directly in the setup top level.
    2. Make sure to display this component inside a command dialog, or you can ignore this warning message by using warn parameter: useConsumer(false)`);return c.inject(G,()=>new Proxy({},{get:()=>t,apply:t}),!0)};var le=typeof global=="object"&&global&&global.Object===Object&&global,Ze=typeof self=="object"&&self&&self.Object===Object&&self,P=le||Ze||Function("return this")(),D=P.Symbol,de=Object.prototype,Xe=de.hasOwnProperty,Je=de.toString,A=D?D.toStringTag:void 0;function Ye(e){var t=Xe.call(e,A),n=e[A];try{e[A]=void 0;var r=!0}catch{}var o=Je.call(e);return r&&(t?e[A]=n:delete e[A]),o}var Qe=Object.prototype,ke=Qe.toString;function et(e){return ke.call(e)}var tt="[object Null]",nt="[object Undefined]",fe=D?D.toStringTag:void 0;function B(e){return e==null?e===void 0?nt:tt:fe&&fe in Object(e)?Ye(e):et(e)}function S(e){return e!=null&&typeof e=="object"}var L=Array.isArray;function T(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function pe(e){return e}var rt="[object AsyncFunction]",ot="[object Function]",at="[object GeneratorFunction]",st="[object Proxy]";function W(e){if(!T(e))return!1;var t=B(e);return t==ot||t==at||t==rt||t==st}var q=P["__core-js_shared__"],he=function(){var e=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function it(e){return!!he&&he in e}var ut=Function.prototype,ct=ut.toString;function lt(e){if(e!=null){try{return ct.call(e)}catch{}try{return e+""}catch{}}return""}var dt=/[\\^$.*+?()[\]{}|]/g,ft=/^\[object .+?Constructor\]$/,pt=Function.prototype,ht=Object.prototype,mt=pt.toString,yt=ht.hasOwnProperty,vt=RegExp("^"+mt.call(yt).replace(dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gt(e){if(!T(e)||it(e))return!1;var t=W(e)?vt:ft;return t.test(lt(e))}function bt(e,t){return e==null?void 0:e[t]}function Z(e,t){var n=bt(e,t);return gt(n)?n:void 0}var me=Object.create,_t=function(){function e(){}return function(t){if(!T(t))return{};if(me)return me(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Ct(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Tt(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var wt=800,Pt=16,jt=Date.now;function Ot(e){var t=0,n=0;return function(){var r=jt(),o=Pt-(r-n);if(n=r,o>0){if(++t>=wt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Et(e){return function(){return e}}var U=function(){try{var e=Z(Object,"defineProperty");return e({},"",{}),e}catch{}}(),At=U?function(e,t){return U(e,"toString",{configurable:!0,enumerable:!1,value:Et(t),writable:!0})}:pe,St=Ot(At),It=9007199254740991,Mt=/^(?:0|[1-9]\d*)$/;function ye(e,t){var n=typeof e;return t=t??It,!!t&&(n=="number"||n!="symbol"&&Mt.test(e))&&e>-1&&e%1==0&&e<t}function X(e,t,n){t=="__proto__"&&U?U(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function x(e,t){return e===t||e!==e&&t!==t}var $t=Object.prototype,Nt=$t.hasOwnProperty;function Rt(e,t,n){var r=e[t];(!(Nt.call(e,t)&&x(r,n))||n===void 0&&!(t in e))&&X(e,t,n)}function Dt(e,t,n,r){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var u=t[s],l=void 0;l===void 0&&(l=e[u]),o?X(n,u,l):Rt(n,u,l)}return n}var ve=Math.max;function Bt(e,t,n){return t=ve(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=ve(r.length-t,0),a=Array(s);++o<s;)a[o]=r[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=r[o];return u[t]=n(a),Ct(e,this,u)}}function Ut(e,t){return St(Bt(e,t,pe),e+"")}var xt=9007199254740991;function ge(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=xt}function J(e){return e!=null&&ge(e.length)&&!W(e)}function zt(e,t,n){if(!T(n))return!1;var r=typeof t;return(r=="number"?J(n)&&ye(t,n.length):r=="string"&&t in n)?x(n[t],e):!1}function Ft(e){return Ut(function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(o--,s):void 0,a&&zt(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,s)}return t})}var Vt=Object.prototype;function be(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Vt;return e===n}function Ht(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Gt="[object Arguments]";function _e(e){return S(e)&&B(e)==Gt}var Ce=Object.prototype,Kt=Ce.hasOwnProperty,Lt=Ce.propertyIsEnumerable,Y=_e(function(){return arguments}())?_e:function(e){return S(e)&&Kt.call(e,"callee")&&!Lt.call(e,"callee")};function Wt(){return!1}var Te=typeof i=="object"&&i&&!i.nodeType&&i,we=Te&&typeof module=="object"&&module&&!module.nodeType&&module,qt=we&&we.exports===Te,Pe=qt?P.Buffer:void 0,Zt=Pe?Pe.isBuffer:void 0,je=Zt||Wt,Xt="[object Arguments]",Jt="[object Array]",Yt="[object Boolean]",Qt="[object Date]",kt="[object Error]",en="[object Function]",tn="[object Map]",nn="[object Number]",rn="[object Object]",on="[object RegExp]",an="[object Set]",sn="[object String]",un="[object WeakMap]",cn="[object ArrayBuffer]",ln="[object DataView]",dn="[object Float32Array]",fn="[object Float64Array]",pn="[object Int8Array]",hn="[object Int16Array]",mn="[object Int32Array]",yn="[object Uint8Array]",vn="[object Uint8ClampedArray]",gn="[object Uint16Array]",bn="[object Uint32Array]",f={};f[dn]=f[fn]=f[pn]=f[hn]=f[mn]=f[yn]=f[vn]=f[gn]=f[bn]=!0,f[Xt]=f[Jt]=f[cn]=f[Yt]=f[ln]=f[Qt]=f[kt]=f[en]=f[tn]=f[nn]=f[rn]=f[on]=f[an]=f[sn]=f[un]=!1;function _n(e){return S(e)&&ge(e.length)&&!!f[B(e)]}function Cn(e){return function(t){return e(t)}}var Oe=typeof i=="object"&&i&&!i.nodeType&&i,I=Oe&&typeof module=="object"&&module&&!module.nodeType&&module,Tn=I&&I.exports===Oe,Q=Tn&&le.process,Ee=function(){try{var e=I&&I.require&&I.require("util").types;return e||Q&&Q.binding&&Q.binding("util")}catch{}}(),Ae=Ee&&Ee.isTypedArray,Se=Ae?Cn(Ae):_n;function wn(e,t){var n=L(e),r=!n&&Y(e),o=!n&&!r&&je(e),s=!n&&!r&&!o&&Se(e),a=n||r||o||s,u=a?Ht(e.length,String):[],l=u.length;for(var p in e)a&&(p=="length"||o&&(p=="offset"||p=="parent")||s&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||ye(p,l))||u.push(p);return u}function Pn(e,t){return function(n){return e(t(n))}}function jn(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var On=Object.prototype,En=On.hasOwnProperty;function An(e){if(!T(e))return jn(e);var t=be(e),n=[];for(var r in e)r=="constructor"&&(t||!En.call(e,r))||n.push(r);return n}function Ie(e){return J(e)?wn(e):An(e)}var M=Z(Object,"create");function Sn(){this.__data__=M?M(null):{},this.size=0}function In(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Mn="__lodash_hash_undefined__",$n=Object.prototype,Nn=$n.hasOwnProperty;function Rn(e){var t=this.__data__;if(M){var n=t[e];return n===Mn?void 0:n}return Nn.call(t,e)?t[e]:void 0}var Dn=Object.prototype,Bn=Dn.hasOwnProperty;function Un(e){var t=this.__data__;return M?t[e]!==void 0:Bn.call(t,e)}var xn="__lodash_hash_undefined__";function zn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=M&&t===void 0?xn:t,this}function w(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}w.prototype.clear=Sn,w.prototype.delete=In,w.prototype.get=Rn,w.prototype.has=Un,w.prototype.set=zn;function Fn(){this.__data__=[],this.size=0}function z(e,t){for(var n=e.length;n--;)if(x(e[n][0],t))return n;return-1}var Vn=Array.prototype,Hn=Vn.splice;function Gn(e){var t=this.__data__,n=z(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Hn.call(t,n,1),--this.size,!0}function Kn(e){var t=this.__data__,n=z(t,e);return n<0?void 0:t[n][1]}function Ln(e){return z(this.__data__,e)>-1}function Wn(e,t){var n=this.__data__,r=z(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function b(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}b.prototype.clear=Fn,b.prototype.delete=Gn,b.prototype.get=Kn,b.prototype.has=Ln,b.prototype.set=Wn;var Me=Z(P,"Map");function qn(){this.size=0,this.__data__={hash:new w,map:new(Me||b),string:new w}}function Zn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function F(e,t){var n=e.__data__;return Zn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Xn(e){var t=F(this,e).delete(e);return this.size-=t?1:0,t}function Jn(e){return F(this,e).get(e)}function Yn(e){return F(this,e).has(e)}function Qn(e,t){var n=F(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function j(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}j.prototype.clear=qn,j.prototype.delete=Xn,j.prototype.get=Jn,j.prototype.has=Yn,j.prototype.set=Qn;var $e=Pn(Object.getPrototypeOf,Object),kn="[object Object]",er=Function.prototype,tr=Object.prototype,Ne=er.toString,nr=tr.hasOwnProperty,rr=Ne.call(Object);function or(e){if(!S(e)||B(e)!=kn)return!1;var t=$e(e);if(t===null)return!0;var n=nr.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Ne.call(n)==rr}function ar(){this.__data__=new b,this.size=0}function sr(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function ir(e){return this.__data__.get(e)}function ur(e){return this.__data__.has(e)}var cr=200;function lr(e,t){var n=this.__data__;if(n instanceof b){var r=n.__data__;if(!Me||r.length<cr-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new j(r)}return n.set(e,t),this.size=n.size,this}function O(e){var t=this.__data__=new b(e);this.size=t.size}O.prototype.clear=ar,O.prototype.delete=sr,O.prototype.get=ir,O.prototype.has=ur,O.prototype.set=lr;var Re=typeof i=="object"&&i&&!i.nodeType&&i,De=Re&&typeof module=="object"&&module&&!module.nodeType&&module,dr=De&&De.exports===Re,Be=dr?P.Buffer:void 0;Be&&Be.allocUnsafe;function fr(e,t){return e.slice()}var Ue=P.Uint8Array;function pr(e){var t=new e.constructor(e.byteLength);return new Ue(t).set(new Ue(e)),t}function hr(e,t){var n=pr(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function mr(e){return typeof e.constructor=="function"&&!be(e)?_t($e(e)):{}}function yr(e){return function(t,n,r){for(var o=-1,s=Object(t),a=r(t),u=a.length;u--;){var l=a[++o];if(n(s[l],l,s)===!1)break}return t}}var vr=yr();function k(e,t,n){(n!==void 0&&!x(e[t],n)||n===void 0&&!(t in e))&&X(e,t,n)}function gr(e){return S(e)&&J(e)}function ee(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function br(e){return Dt(e,Ie(e))}function _r(e,t,n,r,o,s,a){var u=ee(e,n),l=ee(t,n),p=a.get(l);if(p){k(e,n,p);return}var d=s?s(u,l,n+"",e,t,a):void 0,m=d===void 0;if(m){var v=L(l),$=!v&&je(l),V=!v&&!$&&Se(l);d=l,v||$||V?L(u)?d=u:gr(u)?d=Tt(u):$?(m=!1,d=fr(l)):V?(m=!1,d=hr(l)):d=[]:or(l)||Y(l)?(d=u,Y(u)?d=br(u):(!T(u)||W(u))&&(d=mr(l))):m=!1}m&&(a.set(l,d),o(d,l,r,s,a),a.delete(l)),k(e,n,d)}function xe(e,t,n,r,o){e!==t&&vr(t,function(s,a){if(o||(o=new O),T(s))_r(e,t,a,n,xe,r,o);else{var u=r?r(ee(e,a),s,a+"",e,t,o):void 0;u===void 0&&(u=s),k(e,a,u)}},Ie)}var ze=Ft(function(e,t,n){xe(e,t,n)});class te{constructor(){H(this,"mountNode");H(this,"parentInstance");this.parentInstance=c.getCurrentInstance()}setMountNode(t){this.mountNode=t}createCommand(t){return(n,r={})=>{const o=c.ref(ae(t.visible)?!0:!!t.visible);return this.createConsumer(n,o,r,t)}}createConsumer(t,n,r,o){const s={value:null},a=c.defineComponent({setup:()=>{const p=c.ref(),d=()=>{Promise.resolve().then(()=>{s.value.componentRef=p})};return()=>this.renderComponent(t,{componentRef:p,visible:n.value,onMounted:d,config:r,consumer:s})}}),l={...ze(o,r),visible:n};return s.value=ce(this.parentInstance,c.h(a),l),s.value}}class Cr extends te{renderComponent(t,n){const{componentRef:r,visible:o,onMounted:s,config:a,consumer:u}=n,l=d=>{d(),u.value.destroy()},p=(...d)=>{var m,v;return u.value.emit(E.destroy),(v=(m=a.attrs)==null?void 0:m.onClosed)==null?void 0:v.call(m,...d)};return c.createVNode(C.ElDialog,c.mergeProps({ref:r,modelValue:o,beforeClose:l,onVnodeMounted:s,title:a.title,width:a.width},{...a.attrs},{onClosed:p}),{default:()=>t,...a.slots})}}const Tr=(e={})=>{const t=new Cr;return t.setMountNode(e.appendTo),t.createCommand(e)};class wr extends te{renderComponent(t,n){const{componentRef:r,visible:o,onMounted:s,config:a,consumer:u}=n,l=d=>{d(),u.value.destroy()},p=(...d)=>{var m,v;return u.value.emit(E.destroy),(v=(m=a.attrs)==null?void 0:m.onClosed)==null?void 0:v.call(m,...d)};return c.createVNode(C.ElDrawer,c.mergeProps({ref:r,modelValue:o,beforeClose:l,onVnodeMounted:s},{title:a.title,...a.attrs},{onClosed:p}),{default:()=>t,...a.slots})}}const Pr=(e={})=>{const t=new wr;return t.setMountNode(e.appendTo),t.createCommand(e)},jr={round:!0,lockScroll:!0,closeable:!0,style:{backgroundColor:"#fff",color:"#000"}};class Or extends te{renderComponent(t,n){const{componentRef:r,visible:o,onMounted:s,config:a,consumer:u}=n,l=()=>{u.value.destroy()};return c.createVNode(He.Popup,c.mergeProps({ref:r,show:o,onClickCloseIcon:l,onVnodeMounted:s},{...jr,...a.attrs}),{default:()=>t,...a.slots})}}const Fe=(e={})=>{const t=new Or;return t.setMountNode(e.appendTo),t.createCommand(e)},Er=(e={})=>{const t=Fe(e);return(n,r={})=>{const o=ze({},r,{attrs:{position:"bottom",style:{width:"100vw"}}});return t(n,o)}},Ar=()=>{const e=Ge.useRoute();c.watch(()=>e.path,()=>{ie()})};i.CommandComponentConsumerInjectKey=G,i.CommandComponentStackInjectKey=K,i.CommandProviderWithRender=ce,i.ConsumerEventBus=re,i.EVENT_NAME=E,i.PromiseWithResolvers=oe,i.activeConsumers=R,i.busName2EventName=Le,i.deepMerge=se,i.destroyAllConsumer=ie,i.eventName2BusName=Ke,i.getMaxZIndex=We,i.isNull=ae,i.useCloseAllOnRouteChange=Ar,i.useConsumer=qe,i.useElementPlusDialog=Tr,i.useElementPlusDrawer=Pr,i.useVantUiPopup=Fe,i.useVantUiPopupOnBottom=Er,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
